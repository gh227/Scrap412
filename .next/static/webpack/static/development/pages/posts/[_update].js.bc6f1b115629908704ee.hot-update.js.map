{"version":3,"file":"static/webpack/static\\development\\pages\\posts\\[_update].js.bc6f1b115629908704ee.hot-update.js","sources":["webpack:///./pages/posts/[_update].js"],"sourcesContent":["import Head from '../../components/Head'\nimport React, {useState, useEffect} from 'react'\nimport { useCurrentUser } from '../../lib/hooks';\nimport Router from 'next/router'\nimport middleware from '../../middlewares/middleware'\nimport {getSingleUpdated} from '../../lib/db'\n\n\nexport async function getServerSideProps(context) {\n    await middleware.apply(context.req, context.res);\n   const single = await getSingleUpdated(context.req, context.params._update, '_id');\n    if (!single) context.res.statusCode = 404;\n    return {props:{single}}\n  }\n\n\nconst Update=(props)=>{\nconsole.log(props, \" getting it here\")\n    const {single} =  props.single;\n  //const [user] = useCurrentUser();\n  const [errMsg, setErrMsg] = useState('')\n  const [auth, setAuth] = useState(false)\n  const [inputValue, setInputValue] = useState({\n    phoneNumber:single.phoneNumber,\n    code:single.code, \n})\n\n  useEffect(()=>{\n  \n  })\n\n  const handleInput = (e)=>{\n    const value = e.target.value;\n    setInputValue({...inputValue, [e.target.name]:value})\n}\n\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const body = {\n      phoneNumber: e.currentTarget.phoneNumber.value,\n      code: e.currentTarget.code.value,\n      date: new Date()\n    };\n   try{\n     const res = await fetch(`/api/posts`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(body),\n    });\n    if(res.status==200||res.status==201){setErrMsg(\"updated successfully\")}\n  }\n  catch(err){\n    setErrMsg(\"An error occured, pls check your internet connection and try again\")\n  }\n\n  }\n\n  return(\n\n  <div>\n    <Head/>\n   \n    <div id=\"main-content\" className=\"animate-bottom container\"  >\n    <h2 style={{padding: '20px 0'}}>Enter code to continue</h2>\n  \n    {errMsg && <div className=\"alert alert-success\">\n    <strong>{errMsg}</strong>\n    </div>\n  }\n    <form onSubmit={handleSubmit} encType=\"multipart/form-data\">\n    \n  \n      <div className=\"form-group\">\n        <label htmlFor=\"phoneNumber\">Image link</label>\n        <input type=\"text\" className=\"form-control\" id=\"phoneNumber\" name=\"phoneNumber\" value={inputValue.phoneNumber} onChange={handleInput}/>\n      </div>\n  \n      <div className=\"form-group\">\n        <label htmlFor=\"code\">code :</label>\n        <input type=\"text\" className=\"form-control\" id=\"code\" name=\"code\" value={inputValue.code} onChange={handleInput}/>\n      </div>\n  \n     \n      <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\n  \n    </form>\n  </div>\n  \n      \n\n  </div>\n   ) \n    \n}\n\nexport default Update;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAYA;AACA;AADA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAOA;AACA;AAFA;AANA;AAAA;AACA;AAUA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAAA;AAAA;AASA;AACA;AAAA;AAAA;AACA;AAHA;AACA;AATA;AAQA;AACA;AAIA;AAAA;AAAA;AACA;AAdA;AAAA;AACA;AADA;AAAA;AAAA;AAgBA;AACA;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAoBA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;;AACA;;;;A","sourceRoot":""}