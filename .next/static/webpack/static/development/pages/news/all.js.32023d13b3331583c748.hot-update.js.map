{"version":3,"file":"static/webpack/static\\development\\pages\\news\\all.js.32023d13b3331583c748.hot-update.js","sources":["webpack:///./pages/news/all.js"],"sourcesContent":["import Head from '../../components/Head'\nimport Header from 'next/head'\nimport Nav from '../../components/Nav'\nimport Footer from '../../components/Footer'\nimport React, {useState,useEffect} from 'react'\nimport fetching from 'node-fetch'\nimport Link from 'next/link'\nimport Loader from '../../components/Loader'\n\n\nconst All =(props)=>{\n    const {post} = props;\n    return(                  \n            <tr className='table-light'>\n                <td>{post.phoneNumber}</td>\n                <td>\n                <Link href=\"/posts/[_update]\" as={`/posts/${post._id}`}>\n                    <a className=\"btn btn-success\">Edit</a>\n                </Link>\n                </td>\n                <td><form onSubmit={props.submit} >\n                <input type=\"hidden\" id=\"post_id\" value={post._id} name=\"post_id\" />\n                <button className=\"btn btn-success\" type=\"submit\" >delete</button>\n                </form>\n                </td>\n            </tr>\n        )\n}\nconst fetcher =async (url)=>{const r = await fetching(url)\n    return r.json()}\n\nfunction dismissAlert(e){\n       document.querySelector('.alert').style.display = 'none'\n  }\n\nfunction Index () {\n   const [data, setData] = useState({posts:[]})\n    const [msg, setMsg] = useState('')\n    useEffect(()=>{\n       async function getData(){\n         await fetcher(`/api/posts`).then((data)=>{\n            setData(data)\n         })\n         .catch((err)=>{\n             console.log(err)\n         })\n       }\n      getData()\n     },[])\n\n    const submitHandler = async(e)=>{\n        e.preventDefault();\n        const body = {post_id : e.currentTarget.post_id.value}\n        const res = await fetch(`/api/posts`, {\n         method: 'DELETE',\n         headers:{'Content-Type':'application/json'}, \n         body:JSON.stringify(body)\n     });\n     if(res.status ===200){\n         console.log('working')\n         setMsg(\"one document deleted\");\n     }\n    }\n    \nconst allObj = data.posts.map((post)=><All key={post._id} post={post} submit={submitHandler}/>)\n   \nreturn (  \n        <div>\n            <Header>\n                <link rel=\"stylesheet\" type=\"text/css\" href=\"/lib/bootstrap/css/bootstrap.min.css\"/>\n                <link href=\"/css/all.css\" rel=\"stylesheet\"/>\n            </Header>\n           \n            <div className=\"container\">\n                <h1>All Posts</h1>\n                {msg &&\n                    <div className=\"alert alert-danger alert-dismissible fade show\">\n                    <button type=\"button\" className=\"close\" data-dismiss=\"alert\" onClick={dismissAlert}>&times;</button>\n                    <strong>{msg}</strong>\n                </div>\n                }\n                <div className=\"table-responsive\">\n                    <table className=\"table table-bordered\">\n                        <thead>\n                            <tr>\n                            <th>Captions</th>\n                            <th>Edit</th>\n                            <th>delete</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                        {allObj}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div> \n    )\n  }\nexport default Index"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AACA;AAAA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAFA;AAAA;AAIA;AACA;AAAA;AAAA;AACA;AAHA;AACA;AAJA;AAGA;AACA;AAIA;AACA;AACA;AACA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AAAA;;;;A","sourceRoot":""}