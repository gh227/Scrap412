{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hero\\\\Documents\\\\projects\\\\Next\\\\pages\\\\signup.js\";\nvar __jsx = React.createElement;\nimport useCurrentUser from '../lib/hooks.js';\nimport nextConnect from 'next-connect';\nimport React, { useState, useEffect } from 'react';\nimport Head from '../components/head';\nimport Router from 'next/router';\nimport Link from 'next/link';\n\nconst Signup = () => {\n  const {\n    0: errorMsg,\n    1: setErrorMsg\n  } = useState('');\n  const [user, {\n    mutate\n  }] = useCurrentUser();\n  useEffect(() => {\n    if (user) {\n      Router.replace('/');\n    }\n  }, [user]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const body = {\n      name: e.currentTarget.name.value,\n      email: e.currentTarget.email.value,\n      password: e.currentTarget.password.value\n    };\n    const res = await fetch('api/users/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    });\n\n    if (res.status === 201) {\n      const userObj = await res.json();\n      mutate(userObj);\n    } else {\n      setErrorMsg((await res.text()));\n    }\n  };\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }));\n};","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/pages/signup.js"],"names":["useCurrentUser","nextConnect","React","useState","useEffect","Head","Router","Link","Signup","errorMsg","setErrorMsg","user","mutate","replace","handleSubmit","e","preventDefault","body","name","currentTarget","value","email","password","res","fetch","method","headers","JSON","stringify","status","userObj","json","text"],"mappings":";;AAAA,OAAOA,cAAP,MAA2B,iBAA3B;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AAEA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,IAAP,MAAiB,WAAjB;;AAEA,MAAMC,MAAM,GAAE,MAAI;AAClB,QAAM;AAAA,OAACC,QAAD;AAAA,OAAWC;AAAX,MAA0BP,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACQ,IAAD,EAAO;AAACC,IAAAA;AAAD,GAAP,IAAmBZ,cAAc,EAAvC;AACAI,EAAAA,SAAS,CAAC,MAAI;AACV,QAAGO,IAAH,EAAQ;AACJL,MAAAA,MAAM,CAACO,OAAP,CAAe,GAAf;AACH;AACJ,GAJQ,EAIN,CAACF,IAAD,CAJM,CAAT;;AAMA,QAAMG,YAAY,GAAG,MAAOC,CAAP,IAAW;AAC5BA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAMC,IAAI,GAAG;AACTC,MAAAA,IAAI,EAAEH,CAAC,CAACI,aAAF,CAAgBD,IAAhB,CAAqBE,KADlB;AAETC,MAAAA,KAAK,EAACN,CAAC,CAACI,aAAF,CAAgBE,KAAhB,CAAsBD,KAFnB;AAGTE,MAAAA,QAAQ,EAACP,CAAC,CAACI,aAAF,CAAgBG,QAAhB,CAAyBF;AAHzB,KAAb;AAKA,UAAMG,GAAG,GAAG,MAAMC,KAAK,CAAC,YAAD,EAAc;AACjCC,MAAAA,MAAM,EAAE,MADyB;AAEjCC,MAAAA,OAAO,EAAC;AAAC,wBAAe;AAAhB,OAFyB;AAGjCT,MAAAA,IAAI,EAACU,IAAI,CAACC,SAAL,CAAeX,IAAf;AAH4B,KAAd,CAAvB;;AAMA,QAAGM,GAAG,CAACM,MAAJ,KAAa,GAAhB,EAAoB;AAChB,YAAMC,OAAO,GAAG,MAAMP,GAAG,CAACQ,IAAJ,EAAtB;AACAnB,MAAAA,MAAM,CAACkB,OAAD,CAAN;AACH,KAHD,MAII;AACApB,MAAAA,WAAW,EAAC,MAAMa,GAAG,CAACS,IAAJ,EAAP,EAAX;AACH;AAEJ,GArBD;;AAwBI,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADA;AAKH,CAtCD","sourcesContent":["import useCurrentUser from '../lib/hooks.js'\r\nimport nextConnect from 'next-connect'\r\nimport React, {useState, useEffect} from 'react'\r\nimport Head from '../components/head'\r\n\r\nimport Router from 'next/router'\r\nimport Link from 'next/link'\r\n\r\nconst Signup= ()=>{\r\nconst [errorMsg, setErrorMsg] = useState('')\r\nconst [user, {mutate}] = useCurrentUser()\r\nuseEffect(()=>{\r\n    if(user){\r\n        Router.replace('/')\r\n    }\r\n}, [user])\r\n\r\nconst handleSubmit = async (e)=>{\r\n    e.preventDefault();\r\n    const body = {\r\n        name: e.currentTarget.name.value,\r\n        email:e.currentTarget.email.value,\r\n        password:e.currentTarget.password.value\r\n    }\r\n    const res = await fetch('api/users/',{\r\n        method: 'POST',\r\n        headers:{'Content-Type':'application/json'},\r\n        body:JSON.stringify(body),\r\n    });\r\n\r\n    if(res.status===201){\r\n        const userObj = await res.json();\r\n        mutate(userObj);\r\n    }\r\n    else{\r\n        setErrorMsg(await res.text());\r\n    }\r\n\r\n}\r\n\r\n\r\n    return(\r\n    <div>\r\n        <Head/>\r\n    </div>        \r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}