{"ast":null,"code":"import nextConnect from 'next-connect';\nimport middleware from '../../../middlewares/middleware';\nimport cors from 'cors';\nconst handler = nextConnect();\nconst corsOptions = {\n  origin: process.env.HOST\n};\nhandler.use(cors(corsOptions)).use(middleware);\nhandler.get(async (req, res) => {\n  //console.log(req)\n  const comment = await req.db.collection('comments').find({\n    post_id: req.url.toString().split('/')[3]\n  }).toArray();\n  res.json({\n    comment\n  });\n});\nexport default handler;","map":{"version":3,"sources":["c:/Users/hero/Documents/projects/Next/pages/api/comments/[post_id].js"],"names":["nextConnect","middleware","cors","handler","corsOptions","origin","process","env","HOST","use","get","req","res","comment","db","collection","find","post_id","url","toString","split","toArray","json"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,OAAOC,UAAP,MAAuB,iCAAvB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEA,MAAMC,OAAO,GAAGH,WAAW,EAA3B;AAEA,MAAMI,WAAW,GAAG;AAClBC,EAAAA,MAAM,EAAEC,OAAO,CAACC,GAAR,CAAYC;AADF,CAApB;AAIAL,OAAO,CAACM,GAAR,CAAYP,IAAI,CAACE,WAAD,CAAhB,EAA+BK,GAA/B,CAAmCR,UAAnC;AAEAE,OAAO,CAACO,GAAR,CAAY,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC5B;AACA,QAAMC,OAAO,GAAG,MAAMF,GAAG,CAACG,EAAJ,CAAOC,UAAP,CAAkB,UAAlB,EAA8BC,IAA9B,CAAmC;AAACC,IAAAA,OAAO,EAACN,GAAG,CAACO,GAAJ,CAAQC,QAAR,GAAmBC,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B;AAAT,GAAnC,EAA+EC,OAA/E,EAAtB;AAECT,EAAAA,GAAG,CAACU,IAAJ,CAAS;AAACT,IAAAA;AAAD,GAAT;AAEJ,CAND;AAQA,eAAeV,OAAf","sourcesContent":["import nextConnect from 'next-connect';\nimport middleware from '../../../middlewares/middleware';\nimport cors from 'cors'\n\nconst handler = nextConnect();\n\nconst corsOptions = {\n  origin: process.env.HOST\n}\n\nhandler.use(cors(corsOptions)).use(middleware);\n\nhandler.get(async (req, res) => {\n    //console.log(req)\n    const comment = await req.db.collection('comments').find({post_id:req.url.toString().split('/')[3]}).toArray()\n    \n     res.json({comment})\n    \n});\n\nexport default handler;"]},"metadata":{},"sourceType":"module"}