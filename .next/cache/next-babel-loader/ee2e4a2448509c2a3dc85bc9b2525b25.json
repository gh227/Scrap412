{"ast":null,"code":"import { MongoClient } from 'mongodb';\nconst client = new MongoClient(process.env.MONGO_URI, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\nexport default async function database(req, res, next) {\n  if (!client.isConnected()) await client.connect();\n  req.dbClient = client;\n  req.db = client.db('loveConversation');\n  console.log(req.db.users, req.dbClient);\n  res.send('worked');\n}\n/*\r\nimport nextConnect from 'next-connect';\r\nimport middleware from '../../middlewares/middleware';\r\n\r\nexport default function(req, res){\r\n    res.send('hello world')\r\n    \r\n}\r\n\r\nconst handler = nextConnect();\r\n\r\n//handler.use(middleware);\r\n\r\nhandler.get(async(req, res)=>{\r\n    res.json(req.db.collection('users').findOne())\r\n});\r\n\r\nexport default (req, res) => handler.apply(req, res)\r\n*/","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/pages/api/posts.js"],"names":["MongoClient","client","process","env","MONGO_URI","useNewUrlParser","useUnifiedTopology","database","req","res","next","isConnected","connect","dbClient","db","console","log","users","send"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B;AAGA,MAAMC,MAAM,GAAG,IAAID,WAAJ,CAAgBE,OAAO,CAACC,GAAR,CAAYC,SAA5B,EAAuC;AACpDC,EAAAA,eAAe,EAAE,IADmC;AAEpDC,EAAAA,kBAAkB,EAAE;AAFgC,CAAvC,CAAf;AAKA,eAAe,eAAeC,QAAf,CAAwBC,GAAxB,EAA6BC,GAA7B,EAAkCC,IAAlC,EAAwC;AACrD,MAAI,CAACT,MAAM,CAACU,WAAP,EAAL,EAA2B,MAAMV,MAAM,CAACW,OAAP,EAAN;AAC3BJ,EAAAA,GAAG,CAACK,QAAJ,GAAeZ,MAAf;AACAO,EAAAA,GAAG,CAACM,EAAJ,GAASb,MAAM,CAACa,EAAP,CAAU,kBAAV,CAAT;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYR,GAAG,CAACM,EAAJ,CAAOG,KAAnB,EAA0BT,GAAG,CAACK,QAA9B;AACAJ,EAAAA,GAAG,CAACS,IAAJ,CAAS,QAAT;AACD;AAID","sourcesContent":["import { MongoClient } from 'mongodb';\r\n\r\n\r\nconst client = new MongoClient(process.env.MONGO_URI, {\r\n  useNewUrlParser: true,\r\n  useUnifiedTopology: true,\r\n});\r\n\r\nexport default async function database(req, res, next) {\r\n  if (!client.isConnected()) await client.connect();\r\n  req.dbClient = client;\r\n  req.db = client.db('loveConversation');\r\n  console.log(req.db.users, req.dbClient);\r\n  res.send('worked');\r\n}\r\n\r\n \r\n\r\n/*\r\nimport nextConnect from 'next-connect';\r\nimport middleware from '../../middlewares/middleware';\r\n\r\nexport default function(req, res){\r\n    res.send('hello world')\r\n    \r\n}\r\n\r\nconst handler = nextConnect();\r\n\r\n//handler.use(middleware);\r\n\r\nhandler.get(async(req, res)=>{\r\n    res.json(req.db.collection('users').findOne())\r\n});\r\n\r\nexport default (req, res) => handler.apply(req, res)\r\n*/"]},"metadata":{},"sourceType":"module"}