{"ast":null,"code":"import { MongoClient } from 'mongodb';\n/*const client = new MongoClient(\"mongodb+srv://hero227:Justpassword_412@cluster0-3mirl.gcp.mongodb.net/facto?retryWrites=true&w=majority\", {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n});\n\nasync function database(req, res, next) {\n \n  try{\n    if (!client.isConnected()) await client.connect();\n  }\n  catch(err){\n    console.log(err)\n  }\n  \n  console.log(\"hit db function\")\n  req.dbClient = client;\n  req.db = client.db(process.env.DB_NAME);\n  console.log('connection successful')\n  return next();\n}\n\n\n*/\n\nconst client = new MongoClient(\"mongodb+srv://hero227:Justpassword_412@cluster0-3mirl.gcp.mongodb.net/facto?retryWrites=true&w=majority\", {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\n\nasync function database(req, res, next) {\n  try {\n    if (!client.isConnected()) await client.connect();\n    req.dbClient = client;\n    req.db = client.db(process.env.DB_NAME);\n    console.log(req.db);\n    return next();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nexport default database;","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/middlewares/db.js"],"names":["MongoClient","client","useNewUrlParser","useUnifiedTopology","database","req","res","next","isConnected","connect","dbClient","db","process","env","DB_NAME","console","log","err"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B;AAGA;;;;;;;;;;;;;;;;;;;;;;;;AAuBA,MAAMC,MAAM,GAAG,IAAID,WAAJ,CAAgB,yGAAhB,EAA2H;AACxIE,EAAAA,eAAe,EAAE,IADuH;AAExIC,EAAAA,kBAAkB,EAAE;AAFoH,CAA3H,CAAf;;AAKA,eAAeC,QAAf,CAAwBC,GAAxB,EAA6BC,GAA7B,EAAkCC,IAAlC,EAAwC;AAEtC,MAAG;AACD,QAAI,CAACN,MAAM,CAACO,WAAP,EAAL,EAA2B,MAAMP,MAAM,CAACQ,OAAP,EAAN;AAE7BJ,IAAAA,GAAG,CAACK,QAAJ,GAAeT,MAAf;AACAI,IAAAA,GAAG,CAACM,EAAJ,GAASV,MAAM,CAACU,EAAP,CAAUC,OAAO,CAACC,GAAR,CAAYC,OAAtB,CAAT;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYX,GAAG,CAACM,EAAhB;AACA,WAAOJ,IAAI,EAAX;AACC,GAPD,CAQA,OAAMU,GAAN,EAAU;AACRF,IAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACD;AAGF;;AACD,eAAeb,QAAf","sourcesContent":["import { MongoClient } from 'mongodb'\n\n\n/*const client = new MongoClient(\"mongodb+srv://hero227:Justpassword_412@cluster0-3mirl.gcp.mongodb.net/facto?retryWrites=true&w=majority\", {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n});\n\nasync function database(req, res, next) {\n \n  try{\n    if (!client.isConnected()) await client.connect();\n  }\n  catch(err){\n    console.log(err)\n  }\n  \n  console.log(\"hit db function\")\n  req.dbClient = client;\n  req.db = client.db(process.env.DB_NAME);\n  console.log('connection successful')\n  return next();\n}\n\n\n*/\nconst client = new MongoClient(\"mongodb+srv://hero227:Justpassword_412@cluster0-3mirl.gcp.mongodb.net/facto?retryWrites=true&w=majority\", {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n})\n\nasync function database(req, res, next) {\n \n  try{\n    if (!client.isConnected()) await client.connect();\n\n  req.dbClient = client;\n  req.db = client.db(process.env.DB_NAME);\n  console.log(req.db)\n  return next();\n  }\n  catch(err){\n    console.log(err)\n  }\n  \n  \n}\nexport default database"]},"metadata":{},"sourceType":"module"}