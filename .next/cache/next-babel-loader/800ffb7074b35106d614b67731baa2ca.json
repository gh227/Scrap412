{"ast":null,"code":"import nextConnect from 'next-connect';\nimport { nanoid } from 'nanoid';\nimport middleware from '../../../middlewares/middleware';\nimport cors from 'cors';\nconst handler = nextConnect();\nhandler.use(cors({\n  methods: 'POST'\n})).use(middleware);\nconsole.log('hit posts');\nhandler.get(async (req, res) => {\n  const posts = await req.db.collection('posts').find({}).sort({\n    createdAt: -1\n  }).toArray(); //console.log(req.headers)\n\n  res.send({\n    posts\n  });\n});\nexport default handler;","map":{"version":3,"sources":["c:/Users/hero/Documents/documents/projects/Next/pages/api/posts/[phone].js"],"names":["nextConnect","nanoid","middleware","cors","handler","use","methods","console","log","get","req","res","posts","db","collection","find","sort","createdAt","toArray","send"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,SAASC,MAAT,QAAuB,QAAvB;AACA,OAAOC,UAAP,MAAuB,iCAAvB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEA,MAAMC,OAAO,GAAGJ,WAAW,EAA3B;AAMAI,OAAO,CAACC,GAAR,CAAYF,IAAI,CAAC;AAACG,EAAAA,OAAO,EAAC;AAAT,CAAD,CAAhB,EAAoCD,GAApC,CAAwCH,UAAxC;AACAK,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAJ,OAAO,CAACK,GAAR,CAAY,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAE9B,QAAMC,KAAK,GAAG,MAAMF,GAAG,CAACG,EAAJ,CACjBC,UADiB,CACN,OADM,EAEjBC,IAFiB,CAEZ,EAFY,EAGjBC,IAHiB,CAGZ;AAACC,IAAAA,SAAS,EAAC,CAAC;AAAZ,GAHY,EAIjBC,OAJiB,EAApB,CAF8B,CAO5B;;AACFP,EAAAA,GAAG,CAACQ,IAAJ,CAAS;AAACP,IAAAA;AAAD,GAAT;AACD,CATD;AAWA,eAAeR,OAAf","sourcesContent":["import nextConnect from 'next-connect';\r\nimport { nanoid } from 'nanoid';\r\nimport middleware from '../../../middlewares/middleware';\r\nimport cors from 'cors'\r\n\r\nconst handler = nextConnect();\r\n\r\n\r\n\r\n\r\n\r\nhandler.use(cors({methods:'POST'})).use(middleware);\r\nconsole.log('hit posts')\r\nhandler.get(async (req, res) => {\r\n\r\n  const posts = await req.db\r\n    .collection('posts')\r\n    .find({})\r\n    .sort({createdAt:-1})\r\n    .toArray();\r\n    //console.log(req.headers)\r\n  res.send({posts})\r\n});\r\n\r\nexport default handler;"]},"metadata":{},"sourceType":"module"}