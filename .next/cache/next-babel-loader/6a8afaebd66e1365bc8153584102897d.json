{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hero\\\\Documents\\\\projects\\\\Next\\\\pages\\\\news\\\\[cat].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from '../../components/head';\nimport Nav from '../../components/nav';\nimport categoryReturn from '../../lib/posts';\nimport useSWR from 'swr';\n\nfunction Cat(props) {\n  var _this = this;\n\n  var initialData = props.posts;\n\n  var _useSWR = useSWR(\"http://localhost:3000/api/posts\", fetcher, {\n    initialData: initialData\n  }),\n      data = _useSWR.data;\n\n  var intro = categoryReturn(data.posts, 'intro', 1, 'abstract_cat')[0];\n  var cat = categoryReturn(data.posts, 'business', 6, 'category').map(function (post) {\n    return __jsx(Post, {\n      key: post._id,\n      post: post,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 83\n      }\n    });\n  });\n  var latest_news = categoryReturn(data.posts, 'latest_news', 5, 'abstract_cat').map(function (post) {\n    return __jsx(Abstract, {\n      key: post._id,\n      post: post,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 98\n      }\n    });\n  });\n  var top_news = categoryReturn(data.posts, 'top_stories', 5, 'abstract_cat').map(function (post) {\n    return __jsx(Abstract, {\n      key: post._id,\n      post: post,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 95\n      }\n    });\n  });\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 9\n    }\n  }), __jsx(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 9\n    }\n  }), __jsx(Cat, {\n    intro: intro,\n    posts: {\n      cat: cat,\n      latest_news: latest_news,\n      top_news: top_news\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }));\n}\n\nexport var __N_SSP = true;\nexport default Cat;","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/pages/news/[cat].js"],"names":["Head","Nav","categoryReturn","useSWR","Cat","props","initialData","posts","fetcher","data","intro","cat","map","post","_id","latest_news","top_news"],"mappings":";;;AAAA,OAAOA,IAAP,MAAiB,uBAAjB;AACA,OAAOC,GAAP,MAAgB,sBAAhB;AACA,OAAOC,cAAP,MAA2B,iBAA3B;AACA,OAAOC,MAAP,MAAmB,KAAnB;;AAaA,SAASC,GAAT,CAAaC,KAAb,EAAmB;AAAA;;AACjB,MAAMC,WAAW,GAAGD,KAAK,CAACE,KAA1B;;AADiB,gBAEAJ,MAAM,oCAAoCK,OAApC,EAA6C;AAAEF,IAAAA,WAAW,EAAXA;AAAF,GAA7C,CAFN;AAAA,MAETG,IAFS,WAETA,IAFS;;AAGjB,MAAMC,KAAK,GAAGR,cAAc,CAACO,IAAI,CAACF,KAAN,EAAa,OAAb,EAAsB,CAAtB,EAAyB,cAAzB,CAAd,CAAuD,CAAvD,CAAd;AACC,MAAMI,GAAG,GAAIT,cAAc,CAACO,IAAI,CAACF,KAAN,EAAa,UAAb,EAAyB,CAAzB,EAA4B,UAA5B,CAAd,CAAsDK,GAAtD,CAA0D,UAACC,IAAD;AAAA,WAAQ,MAAC,IAAD;AAAM,MAAA,GAAG,EAAEA,IAAI,CAACC,GAAhB;AAAqB,MAAA,IAAI,EAAED,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAR;AAAA,GAA1D,CAAb;AACA,MAAME,WAAW,GAAIb,cAAc,CAACO,IAAI,CAACF,KAAN,EAAa,aAAb,EAA4B,CAA5B,EAA+B,cAA/B,CAAd,CAA6DK,GAA7D,CAAiE,UAACC,IAAD;AAAA,WAAQ,MAAC,QAAD;AAAU,MAAA,GAAG,EAAEA,IAAI,CAACC,GAApB;AAAyB,MAAA,IAAI,EAAED,IAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAR;AAAA,GAAjE,CAArB;AACA,MAAMG,QAAQ,GAAId,cAAc,CAACO,IAAI,CAACF,KAAN,EAAa,aAAb,EAA4B,CAA5B,EAA+B,cAA/B,CAAd,CAA6DK,GAA7D,CAAiE,UAACC,IAAD;AAAA,WAAQ,MAAC,QAAD;AAAU,MAAA,GAAG,EAAEA,IAAI,CAACC,GAApB;AAAyB,MAAA,IAAI,EAAED,IAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAR;AAAA,GAAjE,CAAlB;AACD,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGI,MAAC,GAAD;AAAK,IAAA,KAAK,EAAEH,KAAZ;AAAmB,IAAA,KAAK,EAAG;AAACC,MAAAA,GAAG,EAAHA,GAAD;AAAMI,MAAAA,WAAW,EAAXA,WAAN;AAAmBC,MAAAA,QAAQ,EAARA;AAAnB,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CADF;AAOD;;;AAED,eAAeZ,GAAf","sourcesContent":["import Head from '../../components/head'\r\nimport Nav from '../../components/nav'\r\nimport categoryReturn from '../../lib/posts'\r\nimport useSWR from 'swr'\r\nimport { getPosts } from '../../lib/db';\r\nimport middleware from '../../middlewares/middleware';\r\n\r\n\r\nexport async function getServerSideProps(context) {\r\n  await middleware.apply(context.req, context.res);\r\n const posts = await getPosts(context.req, context.params.cat);\r\n  if (!posts) context.res.statusCode = 404;\r\n  console.log(posts)\r\n  return {props:{posts}}\r\n}\r\n\r\nfunction Cat(props){\r\n  const initialData = props.posts\r\n  const { data } = useSWR(`http://localhost:3000/api/posts`, fetcher, { initialData })\r\n  const intro = categoryReturn(data.posts, 'intro', 1, 'abstract_cat')[0]\r\n   const cat =  categoryReturn(data.posts, 'business', 6, 'category').map((post)=><Post key={post._id} post={post}/>)\r\n   const latest_news =  categoryReturn(data.posts, 'latest_news', 5, 'abstract_cat').map((post)=><Abstract key={post._id} post={post}/>)\r\n   const top_news =  categoryReturn(data.posts, 'top_stories', 5, 'abstract_cat').map((post)=><Abstract key={post._id} post={post}/>)\r\n  return (\r\n    <div>\r\n        <Head/>\r\n        <Nav/>\r\n        <Cat intro={intro} posts= {{cat, latest_news, top_news}}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Cat"]},"metadata":{},"sourceType":"module"}