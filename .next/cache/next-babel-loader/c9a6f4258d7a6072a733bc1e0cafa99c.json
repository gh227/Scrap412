{"ast":null,"code":"import nextConnect from 'next-connect';\nimport { nanoid } from 'nanoid';\nimport middleware from '../../../middlewares/middleware';\nimport cors from 'cors';\nconst handler = nextConnect();\nhandler.use(middleware);\nhandler.get((req, res) => {\n  res.send(\"working\");\n});\nhandler.post(async (req, res) => {\n  console.log(\"hitted\");\n  const {\n    post_id\n  } = req.body;\n  await req.db.collection('posts').deleteOne({\n    post_id: post_id\n  }, (err, obj) => {\n    if (err) throw err;\n    console.log('one document deleted');\n  });\n  return res.send(\"sucessfull\");\n});\nexport default handler;","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/pages/api/posts/all.js"],"names":["nextConnect","nanoid","middleware","cors","handler","use","get","req","res","send","post","console","log","post_id","body","db","collection","deleteOne","err","obj"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,SAASC,MAAT,QAAuB,QAAvB;AACA,OAAOC,UAAP,MAAuB,iCAAvB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEA,MAAMC,OAAO,GAAGJ,WAAW,EAA3B;AAMAI,OAAO,CAACC,GAAR,CAAYH,UAAZ;AAEAE,OAAO,CAACE,GAAR,CAAY,CAACC,GAAD,EAAMC,GAAN,KAAY;AACpBA,EAAAA,GAAG,CAACC,IAAJ,CAAS,SAAT;AACH,CAFD;AAIAL,OAAO,CAACM,IAAR,CAAa,OAAOH,GAAP,EAAYC,GAAZ,KAAoB;AAE/BG,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,QAAM;AAACC,IAAAA;AAAD,MAAYN,GAAG,CAACO,IAAtB;AACA,QAAMP,GAAG,CAACQ,EAAJ,CAAOC,UAAP,CAAkB,OAAlB,EAA2BC,SAA3B,CAAqC;AAACJ,IAAAA,OAAO,EAACA;AAAT,GAArC,EAAwD,CAACK,GAAD,EAAMC,GAAN,KAAY;AACtE,QAAGD,GAAH,EAAQ,MAAMA,GAAN;AACVP,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACD,GAHK,CAAN;AAIA,SAAOJ,GAAG,CAACC,IAAJ,CAAS,YAAT,CAAP;AACD,CATD;AAYA,eAAeL,OAAf","sourcesContent":["import nextConnect from 'next-connect';\r\nimport { nanoid } from 'nanoid';\r\nimport middleware from '../../../middlewares/middleware';\r\nimport cors from 'cors'\r\n\r\nconst handler = nextConnect();\r\n\r\n\r\n\r\n\r\n\r\nhandler.use(middleware);\r\n\r\nhandler.get((req, res)=>{\r\n    res.send(\"working\")\r\n})\r\n\r\nhandler.post(async (req, res) => {\r\n \r\n  console.log(\"hitted\")\r\n  const {post_id} = req.body;\r\n  await req.db.collection('posts').deleteOne({post_id:post_id}, (err, obj)=>{\r\n      if(err) throw err;\r\n    console.log('one document deleted')\r\n  });\r\n  return res.send(\"sucessfull\");\r\n});\r\n\r\n\r\nexport default handler;\r\n"]},"metadata":{},"sourceType":"module"}