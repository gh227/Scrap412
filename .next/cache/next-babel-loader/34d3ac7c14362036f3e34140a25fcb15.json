{"ast":null,"code":"import nextConnect from 'next-connect';\nimport { nanoid } from 'nanoid';\nimport middleware from '../../../middlewares/middleware';\nimport cors from 'cors';\nconst handler = nextConnect();\nhandler.use(middleware);\nhandler.post(async (req, res) => {\n  if (!req.user) {\n    return res.status(401).send('unauthenticated');\n  }\n\n  const {\n    post_id\n  } = req.body;\n  await req.db.collection('posts').deleteOne({\n    post_id: post_id\n  }, (err, obj) => {\n    if (err) throw err;\n    console.log('one document deleted');\n  });\n  return res.send(\"sucessfull\");\n});\nexport default handler;","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/pages/api/posts/all.js"],"names":["nextConnect","nanoid","middleware","cors","handler","use","post","req","res","user","status","send","post_id","body","db","collection","deleteOne","err","obj","console","log"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,SAASC,MAAT,QAAuB,QAAvB;AACA,OAAOC,UAAP,MAAuB,iCAAvB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEA,MAAMC,OAAO,GAAGJ,WAAW,EAA3B;AAMAI,OAAO,CAACC,GAAR,CAAYH,UAAZ;AAEAE,OAAO,CAACE,IAAR,CAAa,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAE/B,MAAI,CAACD,GAAG,CAACE,IAAT,EAAe;AACb,WAAOD,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,iBAArB,CAAP;AACD;;AACD,QAAM;AAACC,IAAAA;AAAD,MAAYL,GAAG,CAACM,IAAtB;AACA,QAAMN,GAAG,CAACO,EAAJ,CAAOC,UAAP,CAAkB,OAAlB,EAA2BC,SAA3B,CAAqC;AAACJ,IAAAA,OAAO,EAACA;AAAT,GAArC,EAAwD,CAACK,GAAD,EAAMC,GAAN,KAAY;AACtE,QAAGD,GAAH,EAAQ,MAAMA,GAAN;AACVE,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACD,GAHK,CAAN;AAIA,SAAOZ,GAAG,CAACG,IAAJ,CAAS,YAAT,CAAP;AACD,CAXD;AAcA,eAAeP,OAAf","sourcesContent":["import nextConnect from 'next-connect';\r\nimport { nanoid } from 'nanoid';\r\nimport middleware from '../../../middlewares/middleware';\r\nimport cors from 'cors'\r\n\r\nconst handler = nextConnect();\r\n\r\n\r\n\r\n\r\n\r\nhandler.use(middleware);\r\n\r\nhandler.post(async (req, res) => {\r\n    \r\n  if (!req.user) {\r\n    return res.status(401).send('unauthenticated');\r\n  }\r\n  const {post_id} = req.body;\r\n  await req.db.collection('posts').deleteOne({post_id:post_id}, (err, obj)=>{\r\n      if(err) throw err;\r\n    console.log('one document deleted')\r\n  });\r\n  return res.send(\"sucessfull\");\r\n});\r\n\r\n\r\nexport default handler;\r\n"]},"metadata":{},"sourceType":"module"}