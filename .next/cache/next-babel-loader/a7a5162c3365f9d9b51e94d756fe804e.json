{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hero\\\\Documents\\\\projects\\\\Next\\\\pages\\\\news\\\\[cat].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from '../../components/head';\nimport Nav from '../../components/nav';\nimport categoryReturn from '../../lib/posts';\nimport useSWR from 'swr';\nimport { getPosts } from '../../lib/db';\nimport middleware from '../../middlewares/middleware';\nexport async function getServerSideProps(context) {\n  await middleware.apply(context.req, context.res);\n  const posts = await getPosts(context.req, context.params.cat);\n  if (!posts) context.res.statusCode = 404;\n  console.log(posts);\n  return {\n    props: {\n      posts\n    }\n  };\n}\n\nfunction Cat(props) {\n  const initialData = props.posts;\n  const {\n    data\n  } = useSWR(`http://localhost:3000/api/posts`, fetcher, {\n    initialData\n  });\n  const intro = categoryReturn(data.posts, 'intro', 1, 'abstract_cat')[0];\n  const cat = categoryReturn(data.posts, 'business', 6, 'category').map(post => __jsx(Post, {\n    key: post._id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 83\n    }\n  }));\n  const latest_news = categoryReturn(data.posts, 'latest_news', 5, 'abstract_cat').map(post => __jsx(Abstract, {\n    key: post._id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 98\n    }\n  }));\n  const top_news = categoryReturn(data.posts, 'top_stories', 5, 'abstract_cat').map(post => __jsx(Abstract, {\n    key: post._id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 95\n    }\n  }));\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 9\n    }\n  }), __jsx(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 9\n    }\n  }), __jsx(Cat, {\n    intro: intro,\n    posts: {\n      cat,\n      latest_news,\n      top_news\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }));\n}\n\nexport default Cat;","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/pages/news/[cat].js"],"names":["Head","Nav","categoryReturn","useSWR","getPosts","middleware","getServerSideProps","context","apply","req","res","posts","params","cat","statusCode","console","log","props","Cat","initialData","data","fetcher","intro","map","post","_id","latest_news","top_news"],"mappings":";;;AAAA,OAAOA,IAAP,MAAiB,uBAAjB;AACA,OAAOC,GAAP,MAAgB,sBAAhB;AACA,OAAOC,cAAP,MAA2B,iBAA3B;AACA,OAAOC,MAAP,MAAmB,KAAnB;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AAGA,OAAO,eAAeC,kBAAf,CAAkCC,OAAlC,EAA2C;AAChD,QAAMF,UAAU,CAACG,KAAX,CAAiBD,OAAO,CAACE,GAAzB,EAA8BF,OAAO,CAACG,GAAtC,CAAN;AACD,QAAMC,KAAK,GAAG,MAAMP,QAAQ,CAACG,OAAO,CAACE,GAAT,EAAcF,OAAO,CAACK,MAAR,CAAeC,GAA7B,CAA5B;AACC,MAAI,CAACF,KAAL,EAAYJ,OAAO,CAACG,GAAR,CAAYI,UAAZ,GAAyB,GAAzB;AACZC,EAAAA,OAAO,CAACC,GAAR,CAAYL,KAAZ;AACA,SAAO;AAACM,IAAAA,KAAK,EAAC;AAACN,MAAAA;AAAD;AAAP,GAAP;AACD;;AAED,SAASO,GAAT,CAAaD,KAAb,EAAmB;AACjB,QAAME,WAAW,GAAGF,KAAK,CAACN,KAA1B;AACA,QAAM;AAAES,IAAAA;AAAF,MAAWjB,MAAM,CAAE,iCAAF,EAAoCkB,OAApC,EAA6C;AAAEF,IAAAA;AAAF,GAA7C,CAAvB;AACA,QAAMG,KAAK,GAAGpB,cAAc,CAACkB,IAAI,CAACT,KAAN,EAAa,OAAb,EAAsB,CAAtB,EAAyB,cAAzB,CAAd,CAAuD,CAAvD,CAAd;AACC,QAAME,GAAG,GAAIX,cAAc,CAACkB,IAAI,CAACT,KAAN,EAAa,UAAb,EAAyB,CAAzB,EAA4B,UAA5B,CAAd,CAAsDY,GAAtD,CAA2DC,IAAD,IAAQ,MAAC,IAAD;AAAM,IAAA,GAAG,EAAEA,IAAI,CAACC,GAAhB;AAAqB,IAAA,IAAI,EAAED,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAlE,CAAb;AACA,QAAME,WAAW,GAAIxB,cAAc,CAACkB,IAAI,CAACT,KAAN,EAAa,aAAb,EAA4B,CAA5B,EAA+B,cAA/B,CAAd,CAA6DY,GAA7D,CAAkEC,IAAD,IAAQ,MAAC,QAAD;AAAU,IAAA,GAAG,EAAEA,IAAI,CAACC,GAApB;AAAyB,IAAA,IAAI,EAAED,IAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAzE,CAArB;AACA,QAAMG,QAAQ,GAAIzB,cAAc,CAACkB,IAAI,CAACT,KAAN,EAAa,aAAb,EAA4B,CAA5B,EAA+B,cAA/B,CAAd,CAA6DY,GAA7D,CAAkEC,IAAD,IAAQ,MAAC,QAAD;AAAU,IAAA,GAAG,EAAEA,IAAI,CAACC,GAApB;AAAyB,IAAA,IAAI,EAAED,IAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAzE,CAAlB;AACD,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGI,MAAC,GAAD;AAAK,IAAA,KAAK,EAAEF,KAAZ;AAAmB,IAAA,KAAK,EAAG;AAACT,MAAAA,GAAD;AAAMa,MAAAA,WAAN;AAAmBC,MAAAA;AAAnB,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CADF;AAOD;;AAED,eAAeT,GAAf","sourcesContent":["import Head from '../../components/head'\r\nimport Nav from '../../components/nav'\r\nimport categoryReturn from '../../lib/posts'\r\nimport useSWR from 'swr'\r\nimport { getPosts } from '../../lib/db';\r\nimport middleware from '../../middlewares/middleware';\r\n\r\n\r\nexport async function getServerSideProps(context) {\r\n  await middleware.apply(context.req, context.res);\r\n const posts = await getPosts(context.req, context.params.cat);\r\n  if (!posts) context.res.statusCode = 404;\r\n  console.log(posts)\r\n  return {props:{posts}}\r\n}\r\n\r\nfunction Cat(props){\r\n  const initialData = props.posts\r\n  const { data } = useSWR(`http://localhost:3000/api/posts`, fetcher, { initialData })\r\n  const intro = categoryReturn(data.posts, 'intro', 1, 'abstract_cat')[0]\r\n   const cat =  categoryReturn(data.posts, 'business', 6, 'category').map((post)=><Post key={post._id} post={post}/>)\r\n   const latest_news =  categoryReturn(data.posts, 'latest_news', 5, 'abstract_cat').map((post)=><Abstract key={post._id} post={post}/>)\r\n   const top_news =  categoryReturn(data.posts, 'top_stories', 5, 'abstract_cat').map((post)=><Abstract key={post._id} post={post}/>)\r\n  return (\r\n    <div>\r\n        <Head/>\r\n        <Nav/>\r\n        <Cat intro={intro} posts= {{cat, latest_news, top_news}}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Cat"]},"metadata":{},"sourceType":"module"}