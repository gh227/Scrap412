{"ast":null,"code":"import nextConnect from 'next-connect';\nimport middleware from '../../middlewares/middleware';\nimport passport from '../../lib/passport';\nimport { extractUser } from '../../lib/api-helpers';\nconst handler = nextConnect();\nhandler.use(middleware);\nhandle.get((req, res) => {\n  res.send(\"auth working\");\n});\nhandler.post(passport.authenticate('local'), (req, res) => {\n  res.json({\n    user: extractUser(req)\n  });\n});\nhandler.delete((req, res) => {\n  req.logOut();\n  res.status(204).end();\n});\nexport default handler;","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/pages/api/auth.js"],"names":["nextConnect","middleware","passport","extractUser","handler","use","handle","get","req","res","send","post","authenticate","json","user","delete","logOut","status","end"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,QAAP,MAAqB,oBAArB;AACA,SAASC,WAAT,QAA4B,uBAA5B;AAEA,MAAMC,OAAO,GAAGJ,WAAW,EAA3B;AAEAI,OAAO,CAACC,GAAR,CAAYJ,UAAZ;AACAK,MAAM,CAACC,GAAP,CAAW,CAACC,GAAD,EAAMC,GAAN,KAAY;AAACA,EAAAA,GAAG,CAACC,IAAJ,CAAS,cAAT;AAAyB,CAAjD;AACAN,OAAO,CAACO,IAAR,CAAaT,QAAQ,CAACU,YAAT,CAAsB,OAAtB,CAAb,EAA6C,CAACJ,GAAD,EAAMC,GAAN,KAAc;AACzDA,EAAAA,GAAG,CAACI,IAAJ,CAAS;AAAEC,IAAAA,IAAI,EAAEX,WAAW,CAACK,GAAD;AAAnB,GAAT;AACD,CAFD;AAIAJ,OAAO,CAACW,MAAR,CAAe,CAACP,GAAD,EAAMC,GAAN,KAAc;AAC3BD,EAAAA,GAAG,CAACQ,MAAJ;AACAP,EAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,GAAhB;AACD,CAHD;AAKA,eAAed,OAAf","sourcesContent":["import nextConnect from 'next-connect';\r\nimport middleware from '../../middlewares/middleware';\r\nimport passport from '../../lib/passport';\r\nimport { extractUser } from '../../lib/api-helpers';\r\n\r\nconst handler = nextConnect();\r\n\r\nhandler.use(middleware);\r\nhandle.get((req, res)=>{res.send(\"auth working\")})\r\nhandler.post(passport.authenticate('local'), (req, res) => {\r\n  res.json({ user: extractUser(req) });\r\n});\r\n\r\nhandler.delete((req, res) => {\r\n  req.logOut();\r\n  res.status(204).end();\r\n});\r\n\r\nexport default handler;\r\n"]},"metadata":{},"sourceType":"module"}