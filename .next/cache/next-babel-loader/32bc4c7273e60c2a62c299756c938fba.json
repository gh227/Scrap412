{"ast":null,"code":"import { MongoClient } from 'mongodb';\nconsole.log(\"hit db\");\nconst client = new MongoClient(process.env.MONGO_URI, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\n\nasync function database(req, res, next) {\n  if (!client.isConnected()) await client.connect();\n  console.log(\"hit db function\");\n  req.dbClient = client;\n  req.db = client.db(process.env.DB_NAME);\n  console.log('connection successful');\n  return next();\n}\n\nexport default database;","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/middlewares/db.js"],"names":["MongoClient","console","log","client","process","env","MONGO_URI","useNewUrlParser","useUnifiedTopology","database","req","res","next","isConnected","connect","dbClient","db","DB_NAME"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B;AAEAC,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,MAAMC,MAAM,GAAG,IAAIH,WAAJ,CAAgBI,OAAO,CAACC,GAAR,CAAYC,SAA5B,EAAuC;AACpDC,EAAAA,eAAe,EAAE,IADmC;AAEpDC,EAAAA,kBAAkB,EAAE;AAFgC,CAAvC,CAAf;;AAKA,eAAeC,QAAf,CAAwBC,GAAxB,EAA6BC,GAA7B,EAAkCC,IAAlC,EAAwC;AAEtC,MAAI,CAACT,MAAM,CAACU,WAAP,EAAL,EAA2B,MAAMV,MAAM,CAACW,OAAP,EAAN;AAC3Bb,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAQ,EAAAA,GAAG,CAACK,QAAJ,GAAeZ,MAAf;AACAO,EAAAA,GAAG,CAACM,EAAJ,GAASb,MAAM,CAACa,EAAP,CAAUZ,OAAO,CAACC,GAAR,CAAYY,OAAtB,CAAT;AACAhB,EAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACA,SAAOU,IAAI,EAAX;AACD;;AACD,eAAeH,QAAf","sourcesContent":["import { MongoClient } from 'mongodb'\r\n\r\nconsole.log(\"hit db\")\r\nconst client = new MongoClient(process.env.MONGO_URI, {\r\n  useNewUrlParser: true,\r\n  useUnifiedTopology: true,\r\n});\r\n\r\nasync function database(req, res, next) {\r\n \r\n  if (!client.isConnected()) await client.connect();\r\n  console.log(\"hit db function\")\r\n  req.dbClient = client;\r\n  req.db = client.db(process.env.DB_NAME);\r\n  console.log('connection successful')\r\n  return next();\r\n}\r\nexport default database"]},"metadata":{},"sourceType":"module"}