{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\hero\\\\Documents\\\\projects\\\\Next\\\\components\\\\Single.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { useCurrentComments } from '../lib/hooks';\nexport default function Single(props) {\n  var _this = this;\n\n  var _props$posts = props.posts,\n      single = _props$posts.single,\n      latestObj = _props$posts.latestObj,\n      topNewsObj = _props$posts.topNewsObj;\n\n  var _useState = useState(''),\n      errMsg = _useState[0],\n      setErrMsg = _useState[1];\n\n  var _useState2 = useState(''),\n      successMsg = _useState2[0],\n      setSuccessMessage = _useState2[1];\n\n  var _useState3 = useState([]),\n      commentObj = _useState3[0],\n      setCommentObj = _useState3[1];\n\n  var _useCurrentComments = useCurrentComments(\"/api/comments/\".concat(single._id)),\n      _useCurrentComments2 = _slicedToArray(_useCurrentComments, 2),\n      comments = _useCurrentComments2[0],\n      mutate = _useCurrentComments2[1].mutate;\n\n  var CommentBlock = function CommentBlock(props) {\n    return __jsx(\"div\", {\n      className: \"showcomments-main\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 32\n      }\n    }, __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 12,\n        columnNumber: 1\n      }\n    }, props.comment.comment), __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 13,\n        columnNumber: 1\n      }\n    }, props.comment.createdAt));\n  };\n\n  var CommentSection = function CommentSection() {\n    if (comments !== null) {\n      return comments.map(function (value) {\n        return __jsx(CommentBlock, {\n          key: value._id,\n          comment: value,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 17,\n            columnNumber: 36\n          }\n        });\n      });\n    }\n  };\n\n  useEffect(function () {\n    setCommentObj(CommentSection());\n  }, [comments]);\n\n  function handleSubmit(e) {\n    var body, res, _commentObj;\n\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n            body = {\n              comment: e.currentTarget.comment.value,\n              post_id: single._id\n            };\n            console.log(e.currentTarget.comment.value);\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(fetch('/api/comments', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(body)\n            }));\n\n          case 5:\n            res = _context.sent;\n\n            if (!(res.status === 201)) {\n              _context.next = 16;\n              break;\n            }\n\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 9:\n            _commentObj = _context.sent;\n            mutate(_commentObj);\n            console.log('from res ', _commentObj);\n            document.getElementById('comment').value = '';\n            setSuccessMessage('your comment sent successfully');\n            _context.next = 21;\n            break;\n\n          case 16:\n            _context.t0 = setErrMsg;\n            _context.next = 19;\n            return _regeneratorRuntime.awrap(res.text());\n\n          case 19:\n            _context.t1 = _context.sent;\n            (0, _context.t0)(_context.t1);\n\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return __jsx(\"section\", {\n    id: \"main-content\",\n    style: {\n      display: 'block'\n    },\n    className: \"animate-bottom section-top-space nav-clear\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 1\n    }\n  }, __jsx(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-9 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"single-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"center single-caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }\n  }, single.caption), __jsx(\"div\", {\n    className: \"center single-date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }, single.created_at), single.author !== null && __jsx(\"div\", {\n    className: \"center single-date author\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }, \"by \".concat(single.author), \" \", __jsx(\"a\", {\n    href: \"{single.source_link}}\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 51\n    }\n  }, \" \", \"from \".concat(single.source))), single.image_link === null ? __jsx(\"div\", {\n    className: \"port-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 22\n    }\n  }, __jsx(\"img\", {\n    src: \"/factonews/defaultimage\",\n    className: \"img-fluid singlepost-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }\n  })) : __jsx(\"div\", {\n    className: \"port-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 23\n    }\n  }, __jsx(\"img\", {\n    src: single.image_link,\n    className: \"img-fluid singlepost-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    className: \"single-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, \"\".concat(single.content)), __jsx(\"div\", {\n    className: \"single-comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"container single-comments-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"single-comments-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"single-comments-inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, \"Comments\"), commentObj, __jsx(\"div\", {\n    id: \"showcomments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 25\n    }\n  }))), __jsx(\"div\", {\n    className: \"post-comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, \"Join the conversation\"), __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    id: \"comment-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"comment-form-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, successMsg === '' && errMsg === '' ? '' : successMsg !== '' ? __jsx(\"div\", {\n    className: \"alert alert-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, successMsg)) : __jsx(\"div\", {\n    className: \"alert alert-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, errMsg)), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }, __jsx(\"textarea\", {\n    className: \"form-control\",\n    rows: \"3\",\n    id: \"comment\",\n    name: \"comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, __jsx(\"button\", {\n    id: \"comment-button\",\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, \"Submit\")))), __jsx(\"a\", {\n    href: \"\",\n    className: \"create-comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, \"Create an Account to join the conversation \")))), __jsx(\"div\", {\n    className: \"col-md-3 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"row sub-section-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"center sub-section-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }, __jsx(\"a\", {\n    href: \"/news/latest_news\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 29\n    }\n  }, \"Latest News\")), __jsx(\"div\", {\n    className: \"col-md-12 mis-section-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 25\n    }\n  }, latestObj))), __jsx(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"row sub-section-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"center sub-section-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }, __jsx(\"a\", {\n    href: \"/news/latest_news\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 29\n    }\n  }, \"Top News\")), __jsx(\"div\", {\n    className: \"col-md-12 mis-section-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }, topNewsObj)))))));\n}","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/components/Single.js"],"names":["React","useState","useEffect","useCurrentComments","Single","props","posts","single","latestObj","topNewsObj","errMsg","setErrMsg","successMsg","setSuccessMessage","commentObj","setCommentObj","_id","comments","mutate","CommentBlock","comment","createdAt","CommentSection","map","value","handleSubmit","e","preventDefault","body","currentTarget","post_id","console","log","fetch","method","headers","JSON","stringify","res","status","json","document","getElementById","text","display","caption","created_at","author","source","image_link","content"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAAQC,kBAAR,QAAiC,cAAjC;AAEA,eAAe,SAASC,MAAT,CAAgBC,KAAhB,EAAsB;AAAA;;AAAA,qBACGA,KAAK,CAACC,KADT;AAAA,MAC9BC,MAD8B,gBAC9BA,MAD8B;AAAA,MACtBC,SADsB,gBACtBA,SADsB;AAAA,MACXC,UADW,gBACXA,UADW;;AAAA,kBAETR,QAAQ,CAAC,EAAD,CAFC;AAAA,MAE9BS,MAF8B;AAAA,MAEtBC,SAFsB;;AAAA,mBAGGV,QAAQ,CAAC,EAAD,CAHX;AAAA,MAG9BW,UAH8B;AAAA,MAGlBC,iBAHkB;;AAAA,mBAIDZ,QAAQ,CAAC,EAAD,CAJP;AAAA,MAI9Ba,UAJ8B;AAAA,MAIlBC,aAJkB;;AAAA,4BAKNZ,kBAAkB,yBAAkBI,MAAM,CAACS,GAAzB,EALZ;AAAA;AAAA,MAK9BC,QAL8B;AAAA,MAKlBC,MALkB,2BAKlBA,MALkB;;AAOrC,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACd,KAAD;AAAA,WAAU;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAC/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAMA,KAAK,CAACe,OAAN,CAAcA,OAApB,CAD+B,EAE/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOf,KAAK,CAACe,OAAN,CAAcC,SAArB,CAF+B,CAAV;AAAA,GAArB;;AAIA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAI;AACvB,QAAGL,QAAQ,KAAK,IAAhB,EAAqB;AAClB,aAAOA,QAAQ,CAACM,GAAT,CAAa,UAAAC,KAAK;AAAA,eAAG,MAAC,YAAD;AAAc,UAAA,GAAG,EAAEA,KAAK,CAACR,GAAzB;AAA8B,UAAA,OAAO,EAAEQ,KAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAH;AAAA,OAAlB,CAAP;AACF;AACJ,GAJD;;AAMAtB,EAAAA,SAAS,CAAC,YAAM;AAChBa,IAAAA,aAAa,CAACO,cAAc,EAAf,CAAb;AACC,GAFQ,EAEN,CAACL,QAAD,CAFM,CAAT;;AAGA,WAAeQ,YAAf,CAA4BC,CAA5B;AAAA;;AAAA;AAAA;AAAA;AAAA;AACIA,YAAAA,CAAC,CAACC,cAAF;AACMC,YAAAA,IAFV,GAEiB;AACXR,cAAAA,OAAO,EAAEM,CAAC,CAACG,aAAF,CAAgBT,OAAhB,CAAwBI,KADtB;AAEXM,cAAAA,OAAO,EAAEvB,MAAM,CAACS;AAFL,aAFjB;AAMIe,YAAAA,OAAO,CAACC,GAAR,CAAYN,CAAC,CAACG,aAAF,CAAgBT,OAAhB,CAAwBI,KAApC;AANJ;AAAA,6CAOsBS,KAAK,CAAC,eAAD,EAAkB;AACvCC,cAAAA,MAAM,EAAE,MAD+B;AAEvCC,cAAAA,OAAO,EAAE;AAAE,gCAAgB;AAAlB,eAF8B;AAGvCP,cAAAA,IAAI,EAAEQ,IAAI,CAACC,SAAL,CAAeT,IAAf;AAHiC,aAAlB,CAP3B;;AAAA;AAOUU,YAAAA,GAPV;;AAAA,kBAaOA,GAAG,CAACC,MAAJ,KAAe,GAbtB;AAAA;AAAA;AAAA;;AAAA;AAAA,6CAckCD,GAAG,CAACE,IAAJ,EAdlC;;AAAA;AAcc1B,YAAAA,WAdd;AAeQI,YAAAA,MAAM,CAACJ,WAAD,CAAN;AACAiB,YAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBlB,WAAzB;AACA2B,YAAAA,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmClB,KAAnC,GAA2C,EAA3C;AACAX,YAAAA,iBAAiB,CAAC,gCAAD,CAAjB;AAlBR;AAAA;;AAAA;AAAA,0BAoBSF,SApBT;AAAA;AAAA,6CAoByB2B,GAAG,CAACK,IAAJ,EApBzB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAuBA,SACA;AAAS,IAAA,EAAE,EAAC,cAAZ;AAA2B,IAAA,KAAK,EAAE;AAACC,MAAAA,OAAO,EAAC;AAAT,KAAlC;AAAqD,IAAA,SAAS,EAAC,4CAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACQ;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACR;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACY;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKrC,MAAM,CAACsC,OADZ,CADJ,EAII;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKtC,MAAM,CAACuC,UADZ,CAJJ,EAOKvC,MAAM,CAACwC,MAAP,KAAkB,IAAlB,IACD;AAAK,IAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACaxC,MAAM,CAACwC,MADpB,QAC8B;AAAG,IAAA,IAAI,EAAC,uBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAA0CxC,MAAM,CAACyC,MAAjD,EAD9B,CARJ,EAeKzC,MAAM,CAAC0C,UAAP,KAAqB,IAArB,GACA;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG;AAAK,IAAA,GAAG,EAAC,yBAAT;AAAmC,IAAA,SAAS,EAAC,0BAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,CADA,GAIC;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,GAAG,EAAE1C,MAAM,CAAC0C,UAAjB;AAA6B,IAAA,SAAS,EAAC,0BAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAnBN,EAwBA;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACK1C,MAAM,CAAC2C,OADZ,EAxBA,EA6BR;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACQ;AAAK,IAAA,SAAS,EAAC,qCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,EAGSpC,UAHT,EAII;AAAK,IAAA,EAAE,EAAC,cAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CADJ,CADR,EAWQ;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAXR,EAcQ;AAAM,IAAA,QAAQ,EAAEW,YAAhB;AAA8B,IAAA,EAAE,EAAC,cAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEA;AAAK,IAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGb,UAAU,KAAG,EAAb,IAAiBF,MAAM,KAAG,EAA3B,GAAiC,EAAjC,GAAqCE,UAAU,KAAG,EAAb,GACvC;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAASA,UAAT,CADJ,CADuC,GAKvC;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAASF,MAAT,CADJ,CANA,EAWI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI;AAAU,IAAA,SAAS,EAAC,cAApB;AAAmC,IAAA,IAAI,EAAC,GAAxC;AAA4C,IAAA,EAAE,EAAC,SAA/C;AACA,IAAA,IAAI,EAAC,SADL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAXJ,EAiBI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAQ,IAAA,EAAE,EAAC,gBAAX;AAA4B,IAAA,IAAI,EAAC,QAAjC;AAA0C,IAAA,SAAS,EAAC,iBAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,CAjBJ,CAFA,CAdR,EAuCY;AAAG,IAAA,IAAI,EAAC,EAAR;AAAW,IAAA,SAAS,EAAC,iBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDAvCZ,CA7BQ,CADZ,CADQ,EA2ER;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEY;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAG,IAAA,IAAI,EAAC,mBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,CADJ,EAII;AAAK,IAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKF,SADL,CAJJ,CADJ,CAFZ,EAaY;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAG,IAAA,IAAI,EAAC,mBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CADJ,EAII;AAAK,IAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKC,UADL,CAJJ,CADJ,CAbZ,CA3EQ,CADJ,CADR,CADA;AA0GC","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport {useCurrentComments} from '../lib/hooks'\r\n\r\nexport default function Single(props){\r\nconst {single, latestObj, topNewsObj} = props.posts\r\nconst [errMsg, setErrMsg] = useState('')\r\nconst [successMsg, setSuccessMessage] = useState('')\r\nconst [commentObj, setCommentObj] = useState([])\r\nconst [comments, { mutate }] = useCurrentComments(`/api/comments/${single._id}`)\r\n\r\nconst CommentBlock = (props)=>(<div className=\"showcomments-main\">  \r\n<div>{props.comment.comment}</div>\r\n<div >{props.comment.createdAt}</div>\r\n</div>)\r\nconst CommentSection = ()=>{\r\n    if(comments !== null){\r\n       return comments.map(value =><CommentBlock key={value._id} comment={value}/> )\r\n    }\r\n}\r\n\r\nuseEffect(() => {\r\nsetCommentObj(CommentSection())\r\n}, [comments])\r\nasync function handleSubmit(e){\r\n    e.preventDefault();\r\n    const body = {\r\n      comment: e.currentTarget.comment.value,\r\n      post_id: single._id\r\n    };\r\n    console.log(e.currentTarget.comment.value)\r\n    const res = await fetch('/api/comments', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(body),\r\n    });\r\n\r\n    if(res.status === 201){\r\n        const commentObj = (await res.json())\r\n        mutate(commentObj);\r\n        console.log('from res ', commentObj)\r\n        document.getElementById('comment').value = ''\r\n        setSuccessMessage('your comment sent successfully')\r\n    }\r\n    else{setErrMsg(await res.text())}\r\n}\r\n\r\nreturn(\r\n<section id=\"main-content\" style={{display:'block'}} className=\"animate-bottom section-top-space nav-clear\">\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n    <div className=\"col-md-9 \">\r\n                <div className=\"single-container\">\r\n                    <div className=\"center single-caption\">\r\n                        {single.caption}\r\n                    </div>\r\n                    <div className=\"center single-date\">\r\n                        {single.created_at}\r\n                    </div>\r\n                    {single.author !== null &&\r\n                    <div className=\"center single-date author\">\r\n                          {`by ${single.author}`} <a href=\"{single.source_link}}\"> {`from ${single.source}`}\r\n                        </a>\r\n                    </div>\r\n                \r\n                    }\r\n\r\n                    {single.image_link ===null\r\n                    ?<div className=\"port-img\">\r\n                        <img src=\"/factonews/defaultimage\" className=\"img-fluid singlepost-img\" />\r\n                    </div>\r\n                    : <div className=\"port-img\">\r\n                        <img src={single.image_link} className=\"img-fluid singlepost-img\" />\r\n                    </div>\r\n                    }\r\n                \r\n                <div className=\"single-content\">\r\n                { `${single.content}`}\r\n                </div>\r\n    \r\n\r\n        <div className=\"single-comments\" >\r\n                <div className=\"container single-comments-container\" >\r\n                    <div className=\"single-comments-col\">\r\n                        <div className=\"single-comments-inner\">Comments</div>\r\n                        {/*loop comments*/} \r\n                            {commentObj}\r\n                        <div id=\"showcomments\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/*if user exist*/}\r\n                <div className=\"post-comment\" >\r\n                Join the conversation                     \r\n                </div>\r\n                <form onSubmit={handleSubmit} id=\"comment-form\" >\r\n                                           \r\n                <div className=\"comment-form-container\">\r\n                { (successMsg===''&&errMsg==='') ? '': successMsg!==''?\r\n                <div className=\"alert alert-success\">\r\n                    <strong>{successMsg}</strong>\r\n                </div>\r\n                :              \r\n                <div className=\"alert alert-danger\">\r\n                    <strong>{errMsg}</strong>\r\n                </div>\r\n                }\r\n                    \r\n                    <div className=\"form-group\">\r\n                        {/*\"input type=hidden name=post_id value=*/}\r\n                        <textarea className=\"form-control\" rows=\"3\" id=\"comment\" \r\n                        name=\"comment\"></textarea>\r\n                    </div>\r\n                    \r\n                    <div className=\"form-group\">\r\n                        <button id=\"comment-button\" type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n                    </div>\r\n                </div>   \r\n            </form>\r\n                {/*no user*/}\r\n                    <a href=\"\" className=\"create-comments\">Create an Account to join the conversation </a>\r\n            \r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div className=\"col-md-3 \">\r\n\r\n                <div className=\"container\">\r\n                    <div className=\"row sub-section-row\">\r\n                        <div className=\"center sub-section-title\">\r\n                            <a href=\"/news/latest_news\">Latest News</a>\r\n                        </div>\r\n                        <div className=\"col-md-12 mis-section-col\">\r\n                            {latestObj}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"container\">\r\n                    <div className=\"row sub-section-row\">\r\n                        <div className=\"center sub-section-title\">\r\n                            <a href=\"/news/latest_news\">Top News</a>\r\n                        </div>\r\n                        <div className=\"col-md-12 mis-section-col\">\r\n                            {topNewsObj}\r\n                        </div>\r\n                    </div>\r\n                </div>              \r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>\r\n)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}