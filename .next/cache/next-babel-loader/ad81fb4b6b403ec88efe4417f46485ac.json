{"ast":null,"code":"//initialize the default app\nvar admin = require('firebase-admin');\n\nimport meco from './meco.json';\nadmin.initializeApp({\n  credential: admin.credential.cert(meco),\n  databaseURL: 'https://meco-7dd4b.firebaseio.com'\n});\n\nasync function database(req, res, next) {\n  //if (!admin.isConnected()) await admin.connect();\n  req.dbClient = admin;\n  req.db = admin.firestore();\n  console.log(req.db.collection('test'));\n  return next();\n}\n\nexport default database;\n/*import { MongoClient } from 'mongodb';\r\n\r\n\r\nconst client = new MongoClient(process.env.MONGO_URI, {\r\n  useNewUrlParser: true,\r\n  useUnifiedTopology: true,\r\n});\r\n\r\nasync function database(req, res, next) {\r\n  if (!client.isConnected()) await client.connect();\r\n  req.dbClient = client;\r\n  req.db = client.db(process.env.DB_NAME);\r\n  return next();\r\n}*/","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/middlewares/db.js"],"names":["admin","require","meco","initializeApp","credential","cert","databaseURL","database","req","res","next","dbClient","db","firestore","console","log","collection"],"mappings":"AAAA;AACA,IAAIA,KAAK,GAAGC,OAAO,CAAC,gBAAD,CAAnB;;AACA,OAAOC,IAAP,MAAiB,aAAjB;AAEAF,KAAK,CAACG,aAAN,CAAoB;AAACC,EAAAA,UAAU,EAACJ,KAAK,CAACI,UAAN,CAAiBC,IAAjB,CAAsBH,IAAtB,CAAZ;AACpBI,EAAAA,WAAW,EAAC;AADQ,CAApB;;AAGA,eAAeC,QAAf,CAAwBC,GAAxB,EAA6BC,GAA7B,EAAkCC,IAAlC,EAAwC;AACtC;AACAF,EAAAA,GAAG,CAACG,QAAJ,GAAeX,KAAf;AACAQ,EAAAA,GAAG,CAACI,EAAJ,GAASZ,KAAK,CAACa,SAAN,EAAT;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYP,GAAG,CAACI,EAAJ,CAAOI,UAAP,CAAkB,MAAlB,CAAZ;AACA,SAAON,IAAI,EAAX;AACD;;AAED,eAAeH,QAAf;AAIA","sourcesContent":["//initialize the default app\r\nvar admin = require('firebase-admin');\r\nimport meco from './meco.json'\r\n\r\nadmin.initializeApp({credential:admin.credential.cert(meco),\r\ndatabaseURL:'https://meco-7dd4b.firebaseio.com'});\r\n\r\nasync function database(req, res, next) {\r\n  //if (!admin.isConnected()) await admin.connect();\r\n  req.dbClient = admin;\r\n  req.db = admin.firestore();\r\n  console.log(req.db.collection('test'))\r\n  return next();\r\n}\r\n\r\nexport default database;\r\n\r\n\r\n\r\n/*import { MongoClient } from 'mongodb';\r\n\r\n\r\nconst client = new MongoClient(process.env.MONGO_URI, {\r\n  useNewUrlParser: true,\r\n  useUnifiedTopology: true,\r\n});\r\n\r\nasync function database(req, res, next) {\r\n  if (!client.isConnected()) await client.connect();\r\n  req.dbClient = client;\r\n  req.db = client.db(process.env.DB_NAME);\r\n  return next();\r\n}*/\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}