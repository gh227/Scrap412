{"ast":null,"code":"import nextConnect from 'next-connect';\nimport { nanoid } from 'nanoid';\nimport middleware from '../../../middlewares/middleware';\nconst handler = nextConnect();\nhandler.use(middleware);\nhandler.get(async (req, res) => {\n  const cat = req.url.split('/')[req.url.split('/').length - 1];\n  const posts = await req.db.collection('posts').find({\n    category: cat\n  }).sort({\n    createdAt: -1\n  }).toArray();\n  res.send({\n    posts\n  });\n});\nexport default handler;","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/pages/api/posts/cat.js"],"names":["nextConnect","nanoid","middleware","handler","use","get","req","res","cat","url","split","length","posts","db","collection","find","category","sort","createdAt","toArray","send"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,SAASC,MAAT,QAAuB,QAAvB;AACA,OAAOC,UAAP,MAAuB,iCAAvB;AAEA,MAAMC,OAAO,GAAGH,WAAW,EAA3B;AAEAG,OAAO,CAACC,GAAR,CAAYF,UAAZ;AAEAC,OAAO,CAACE,GAAR,CAAY,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAChC,QAAMC,GAAG,GAAGF,GAAG,CAACG,GAAJ,CAAQC,KAAR,CAAc,GAAd,EAAmBJ,GAAG,CAACG,GAAJ,CAAQC,KAAR,CAAc,GAAd,EAAmBC,MAAnB,GAA0B,CAA7C,CAAZ;AACA,QAAMC,KAAK,GAAG,MAAMN,GAAG,CAACO,EAAJ,CACfC,UADe,CACJ,OADI,EAEfC,IAFe,CAEV;AAACC,IAAAA,QAAQ,EAACR;AAAV,GAFU,EAGfS,IAHe,CAGV;AAACC,IAAAA,SAAS,EAAC,CAAC;AAAZ,GAHU,EAIfC,OAJe,EAApB;AAKEZ,EAAAA,GAAG,CAACa,IAAJ,CAAS;AAACR,IAAAA;AAAD,GAAT;AACD,CARD;AAUA,eAAeT,OAAf","sourcesContent":["import nextConnect from 'next-connect';\r\nimport { nanoid } from 'nanoid';\r\nimport middleware from '../../../middlewares/middleware';\r\n\r\nconst handler = nextConnect();\r\n\r\nhandler.use(middleware);\r\n\r\nhandler.get(async (req, res) => {\r\nconst cat = req.url.split('/')[req.url.split('/').length-1];\r\nconst posts = await req.db\r\n    .collection('posts')\r\n    .find({category:cat})\r\n    .sort({createdAt:-1})\r\n    .toArray();\r\n  res.send({posts})\r\n});\r\n\r\nexport default handler;\r\n"]},"metadata":{},"sourceType":"module"}