{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hero\\\\Documents\\\\projects\\\\Next\\\\components\\\\Single.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { useCurrentComments } from '../lib/hooks';\nimport Link from 'next/link';\nimport { useCurrentUser } from '../lib/hooks';\nimport { EmailShareButton, FacebookShareButton, TwitterShareButton, WhatsappShareButton, TelegramShareButton, LinkedinShareButton } from 'react-share';\nexport default function Single(props) {\n  const [user] = useCurrentUser();\n  const {\n    single,\n    latestObj,\n    topNewsObj\n  } = props.posts;\n  const {\n    0: errMsg,\n    1: setErrMsg\n  } = useState('');\n  const {\n    0: commentObj,\n    1: setCommentObj\n  } = useState([]);\n  const [comments, {\n    mutate\n  }] = useCurrentComments(`/api/comments/${single._id}`);\n\n  const CommentBlock = props => __jsx(\"div\", {\n    className: \"card showcomments-main bg-light-grey\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 1\n    }\n  }, __jsx(\"div\", {\n    className: \"comment-img-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 4\n    }\n  }, __jsx(\"i\", {\n    className: \"fas fa-user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 9\n    }\n  })), __jsx(\"div\", {\n    className: \"comments-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 9\n    }\n  }, props.comment.comment), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 9\n    }\n  }, new Date(props.comment.createdAt).toString().slice(0, 16))));\n\n  const CommentSection = () => {\n    if (comments instanceof Array) {\n      return comments.map(value => __jsx(CommentBlock, {\n        key: value._id,\n        comment: value,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 36\n        }\n      }));\n    }\n\n    return [];\n  };\n\n  useEffect(() => {\n    setCommentObj(CommentSection());\n  }, [comments]);\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const body = {\n      comment: e.currentTarget.comment.value,\n      post_id: single._id\n    };\n    console.log(e.currentTarget.comment.value);\n    const res = await fetch('/api/comments', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    });\n\n    if (res.status === 201) {\n      const commentObj = await res.json();\n      mutate(commentObj);\n      document.getElementById('comment').value = '';\n    } else {\n      setErrMsg((await res.text()));\n    }\n  }\n\n  return __jsx(\"section\", {\n    id: \"main-content\",\n    style: {\n      display: 'block'\n    },\n    className: \"animate-bottom section-top-space nav-clear\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 1\n    }\n  }, __jsx(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-9 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"single-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"center single-caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  }, single.caption), __jsx(\"div\", {\n    className: \"center single-date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }, new Date(single.createdAt).toString().slice(0, 16)), __jsx(\"div\", {\n    className: \"port-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }, __jsx(\"img\", {\n    src: single.image_link,\n    className: \"img-fluid singlepost-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    className: \"mt-3 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, __jsx(FacebookShareButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  })), __jsx(\"div\", {\n    style: {\n      whiteSpace: 'pre-line'\n    },\n    className: \"single-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, single.content), single.source !== null && __jsx(\"div\", {\n    className: \"ml-4 single-date author\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }, \"Source: \"), __jsx(\"a\", {\n    href: \"{single.source_link}}\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 40\n    }\n  }, single.source)), __jsx(\"div\", {\n    className: \"single-comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \" container single-comments-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"single-comments-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"single-comments-inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 25\n    }\n  }, \"Comments\"), commentObj, __jsx(\"div\", {\n    id: \"showcomments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  }))), __jsx(\"div\", {\n    className: \"post-comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, \"Join the conversation\"), __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    id: \"comment-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"comment-form-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, errMsg !== '' && __jsx(\"div\", {\n    className: \"alert alert-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, errMsg)), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, __jsx(\"textarea\", {\n    className: \"form-control\",\n    rows: \"3\",\n    id: \"comment\",\n    name: \"comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 21\n    }\n  }, __jsx(\"button\", {\n    id: \"comment-button\",\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 25\n    }\n  }, \"Submit\")))), !user && __jsx(\"a\", {\n    href: \"\",\n    className: \"create-comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }, \"Create an Account to join the conversation \")))), __jsx(\"div\", {\n    className: \"col-md-3 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"row sub-section-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"center sub-section-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }, \"Latest News\"), __jsx(\"div\", {\n    className: \"col-md-12 mis-section-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }, latestObj))), __jsx(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"row sub-section-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"center sub-section-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, \"Top News\"), __jsx(\"div\", {\n    className: \"col-md-12 mis-section-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 25\n    }\n  }, topNewsObj)))))));\n}","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/components/Single.js"],"names":["React","useState","useEffect","useCurrentComments","Link","useCurrentUser","EmailShareButton","FacebookShareButton","TwitterShareButton","WhatsappShareButton","TelegramShareButton","LinkedinShareButton","Single","props","user","single","latestObj","topNewsObj","posts","errMsg","setErrMsg","commentObj","setCommentObj","comments","mutate","_id","CommentBlock","comment","Date","createdAt","toString","slice","CommentSection","Array","map","value","handleSubmit","e","preventDefault","body","currentTarget","post_id","console","log","res","fetch","method","headers","JSON","stringify","status","json","document","getElementById","text","display","caption","image_link","whiteSpace","content","source"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport {useCurrentComments} from '../lib/hooks'\nimport Link from 'next/link'\nimport { useCurrentUser } from '../lib/hooks';\nimport {EmailShareButton, \n        FacebookShareButton, \n        TwitterShareButton, \n        WhatsappShareButton,\n        TelegramShareButton,\n        LinkedinShareButton} from 'react-share'\n\nexport default function Single(props){\nconst [user] = useCurrentUser()\nconst {single, latestObj, topNewsObj} = props.posts\nconst [errMsg, setErrMsg] = useState('')\nconst [commentObj, setCommentObj] = useState([])\nconst [comments, { mutate }] = useCurrentComments(`/api/comments/${single._id}`)\n\nconst CommentBlock = (props)=>(\n \n<div className=\"card showcomments-main bg-light-grey\">  \n   <div className=\"comment-img-container\">\n        <i className=\"fas fa-user\"></i>\n    </div>\n    <div className=\"comments-item\">\n        <div>{props.comment.comment}</div>\n        <div >{new Date(props.comment.createdAt).toString().slice(0,16)}</div>\n    </div>\n</div>\n)\n\n\nconst CommentSection = ()=>{\n  \n    if(comments instanceof Array){\n       return comments.map(value =><CommentBlock key={value._id} comment={value}/> )\n    }\n    return []\n}\n\nuseEffect(() => {\nsetCommentObj(CommentSection())\n}, [comments])\nasync function handleSubmit(e){\n    e.preventDefault();\n    const body = {\n      comment: e.currentTarget.comment.value,\n      post_id: single._id\n    };\n    console.log(e.currentTarget.comment.value)\n    const res = await fetch('/api/comments', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(body),\n    });\n\n    if(res.status === 201){\n        const commentObj = (await res.json())\n        mutate(commentObj);\n       \n        document.getElementById('comment').value = ''\n    }\n    else{setErrMsg(await res.text())}\n}\n\nreturn(\n<section id=\"main-content\" style={{display:'block'}} className=\"animate-bottom section-top-space nav-clear\">\n        <div className=\"container-fluid\">\n            <div className=\"row\">\n    <div className=\"col-md-9 \">\n                <div className=\"single-container\">\n                    <div className=\"center single-caption\">\n                        {single.caption}\n                    </div>\n                    <div className=\"center single-date\">\n                        {new Date(single.createdAt).toString().slice(0,16)}\n                    </div>\n                    \n                    <div className=\"port-img\">\n                        <img src={single.image_link} className=\"img-fluid singlepost-img\" />\n                    </div>\n                <div className=\"mt-3 mb-3\">\n                    <FacebookShareButton/>\n                </div>\n                <div style={{whiteSpace:'pre-line'}} className=\"single-content\">\n                { single.content}\n                </div>\n\n                {single.source !== null &&\n                    <div className=\"ml-4 single-date author\">\n                        <b>Source: </b><a href=\"{single.source_link}}\">{single.source}</a>\n                    </div>\n                }\n\n        <div className=\"single-comments\" >\n                <div className=\" container single-comments-container\" >\n                    <div className=\"single-comments-col\">\n                        <div className=\"single-comments-inner\">Comments</div>\n                        {/*loop comments*/} \n                            {commentObj}\n                        <div id=\"showcomments\"></div>\n                    </div>\n                </div>\n\n                {/*if user exist*/}\n                <div className=\"post-comment\" >\n                Join the conversation                     \n                </div>\n                <form onSubmit={handleSubmit} id=\"comment-form\" >\n                                           \n                <div className=\"comment-form-container\">\n                { errMsg!==''&&              \n                <div className=\"alert alert-danger\">\n                    <strong>{errMsg}</strong>\n                </div>\n                }\n                    \n                    <div className=\"form-group\">\n                        {/*\"input type=hidden name=post_id value=*/}\n                        <textarea className=\"form-control\" rows=\"3\" id=\"comment\" \n                        name=\"comment\"></textarea>\n                    </div>\n                    \n                    <div className=\"form-group\">\n                        <button id=\"comment-button\" type=\"submit\" className=\"btn btn-primary\">Submit</button>\n                    </div>\n                </div>   \n            </form>\n                {!user &&\n                    <a href=\"\" className=\"create-comments\">Create an Account to join the conversation </a>\n                }\n            </div>\n        </div>\n    </div>\n    <div className=\"col-md-3 \">\n\n                <div className=\"container\">\n                    <div className=\"row sub-section-row\">\n                        <div className=\"center sub-section-title\">\n                            Latest News\n                        </div>\n                        <div className=\"col-md-12 mis-section-col\">\n                            {latestObj}\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"container\">\n                    <div className=\"row sub-section-row\">\n                        <div className=\"center sub-section-title\">\n                          Top News\n                        </div>\n                        <div className=\"col-md-12 mis-section-col\">\n                            {topNewsObj}\n                        </div>\n                    </div>\n                </div>              \n            </div>\n        </div>\n    </div>\n</section>\n)\n}\n"]},"metadata":{},"sourceType":"module"}