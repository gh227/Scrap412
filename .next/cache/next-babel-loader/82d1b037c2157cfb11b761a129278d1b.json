{"ast":null,"code":"import nextConnect from 'next-connect';\nimport middleware from '../../middlewares/middleware';\nimport passport from '../../lib/passport';\nimport { extractUser } from '../../lib/api-helper';\nimport cors from 'cors';\nconst handler = nextConnect();\nconst corsOptions = {\n  origin: process.env.HOST\n};\nhandler.use(cors(corsOptions)).use(middleware);\nhandler.post(passport.authenticate('local'), (req, res) => {\n  res.json({\n    user: extractUser(req)\n  });\n});\nhandler.delete((req, res) => {\n  req.logOut();\n  res.status(204).end();\n});\nexport default handler;","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/pages/api/auth.js"],"names":["nextConnect","middleware","passport","extractUser","cors","handler","corsOptions","origin","process","env","HOST","use","post","authenticate","req","res","json","user","delete","logOut","status","end"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,QAAP,MAAqB,oBAArB;AACA,SAASC,WAAT,QAA4B,sBAA5B;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEA,MAAMC,OAAO,GAAGL,WAAW,EAA3B;AAEA,MAAMM,WAAW,GAAG;AAClBC,EAAAA,MAAM,EAAEC,OAAO,CAACC,GAAR,CAAYC;AADF,CAApB;AAIAL,OAAO,CAACM,GAAR,CAAYP,IAAI,CAACE,WAAD,CAAhB,EAA+BK,GAA/B,CAAmCV,UAAnC;AACAI,OAAO,CAACO,IAAR,CAAaV,QAAQ,CAACW,YAAT,CAAsB,OAAtB,CAAb,EAA6C,CAACC,GAAD,EAAMC,GAAN,KAAc;AACvDA,EAAAA,GAAG,CAACC,IAAJ,CAAS;AAAEC,IAAAA,IAAI,EAAEd,WAAW,CAACW,GAAD;AAAnB,GAAT;AACD,CAFH;AAIET,OAAO,CAACa,MAAR,CAAe,CAACJ,GAAD,EAAMC,GAAN,KAAc;AAC3BD,EAAAA,GAAG,CAACK,MAAJ;AACAJ,EAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,GAAhB;AACD,CAHD;AAMF,eAAehB,OAAf","sourcesContent":["import nextConnect from 'next-connect';\nimport middleware from '../../middlewares/middleware';\nimport passport from '../../lib/passport';\nimport { extractUser } from '../../lib/api-helper';\nimport cors from 'cors'\n\nconst handler = nextConnect();\n\nconst corsOptions = {\n  origin: process.env.HOST\n}\n\nhandler.use(cors(corsOptions)).use(middleware);\nhandler.post(passport.authenticate('local'), (req, res) => {\n    res.json({ user: extractUser(req) });\n  });\n  \n  handler.delete((req, res) => {\n    req.logOut();\n    res.status(204).end();\n  });\n\n\nexport default handler;\n"]},"metadata":{},"sourceType":"module"}