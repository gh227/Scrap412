{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"c:\\\\Users\\\\hero\\\\Documents\\\\projects\\\\Next\\\\components\\\\Single.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { useCurrentComments } from '../lib/hooks';\nimport Link from 'next/link';\nimport { useCurrentUser } from '../lib/hooks';\nimport { EmailShareButton, FacebookShareButton, FacebookIcon, TwitterShareButton, TwitterIcon, WhatsappShareButton, WhatsappIcon, TelegramShareButton, TelegramIcon, LinkedinShareButton, LinkedinIcon } from 'react-share';\nexport default function Single(props) {\n  var _this = this;\n\n  var _useCurrentUser = useCurrentUser(),\n      _useCurrentUser2 = _slicedToArray(_useCurrentUser, 1),\n      user = _useCurrentUser2[0];\n\n  var _props$posts = props.posts,\n      single = _props$posts.single,\n      latestObj = _props$posts.latestObj,\n      topNewsObj = _props$posts.topNewsObj;\n\n  var _useState = useState(''),\n      errMsg = _useState[0],\n      setErrMsg = _useState[1];\n\n  var _useState2 = useState([]),\n      commentObj = _useState2[0],\n      setCommentObj = _useState2[1];\n\n  var _useCurrentComments = useCurrentComments(\"/api/comments/\".concat(single._id)),\n      _useCurrentComments2 = _slicedToArray(_useCurrentComments, 2),\n      comments = _useCurrentComments2[0],\n      mutate = _useCurrentComments2[1].mutate;\n\n  var _useState3 = useState({}),\n      location = _useState3[0],\n      setLocation = _useState3[1];\n\n  console.log(location);\n\n  var CommentBlock = function CommentBlock(props) {\n    return __jsx(\"div\", {\n      className: \"card showcomments-main bg-light-grey\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 1\n      }\n    }, __jsx(\"div\", {\n      className: \"comment-img-container\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 4\n      }\n    }, __jsx(\"i\", {\n      className: \"fas fa-user\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }\n    })), __jsx(\"div\", {\n      className: \"comments-item\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 5\n      }\n    }, __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }\n    }, props.comment.comment), __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }\n    }, new Date(props.comment.createdAt).toString().slice(0, 16))));\n  };\n\n  var stringToHtml = function stringToHtml() {\n    var ele = document.createElement('div');\n    ele.innerHTML = single.content;\n    return ele;\n  };\n\n  var CommentSection = function CommentSection() {\n    if (comments instanceof Array) {\n      return comments.map(function (value) {\n        return __jsx(CommentBlock, {\n          key: value._id,\n          comment: value,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 36\n          }\n        });\n      });\n    }\n\n    return [];\n  };\n\n  stringToHtml();\n  useEffect(function () {\n    setLocation(window.location.href);\n    setCommentObj(CommentSection());\n  }, [comments]);\n\n  function handleSubmit(e) {\n    var body, res, _commentObj;\n\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n            body = {\n              comment: e.currentTarget.comment.value,\n              post_id: single._id\n            };\n            console.log(e.currentTarget.comment.value);\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(fetch('/api/comments', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(body)\n            }));\n\n          case 5:\n            res = _context.sent;\n\n            if (!(res.status === 201)) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 9:\n            _commentObj = _context.sent;\n            mutate(_commentObj);\n            document.getElementById('comment').value = '';\n            _context.next = 19;\n            break;\n\n          case 14:\n            _context.t0 = setErrMsg;\n            _context.next = 17;\n            return _regeneratorRuntime.awrap(res.text());\n\n          case 17:\n            _context.t1 = _context.sent;\n            (0, _context.t0)(_context.t1);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return __jsx(\"section\", {\n    id: \"main-content\",\n    style: {\n      display: 'block'\n    },\n    className: \"animate-bottom section-top-space nav-clear\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 1\n    }\n  }, __jsx(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-9 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"single-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"center single-caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, single.caption), __jsx(\"div\", {\n    className: \"center single-date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, new Date(single.createdAt).toString().slice(0, 16)), __jsx(\"div\", {\n    className: \"port-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, __jsx(\"img\", {\n    src: single.image_link,\n    className: \"img-fluid singlepost-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    style: {\n      whiteSpace: 'pre-line'\n    },\n    className: \"single-content\",\n    dangerouslySetInnerHTML: {\n      __html: single.content\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, single.source !== null && __jsx(\"div\", {\n    className: \"mt-2 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, \"Source: \"), __jsx(\"a\", {\n    href: \"{single.source_link}}\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 36\n    }\n  }, single.source)), __jsx(\"div\", {\n    className: \"container margin-gap position-relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 1\n    }\n  }, __jsx(\"div\", {\n    className: \"sharing-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, __jsx(\"img\", {\n    src: \"/images/sharing_caring.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 50\n    }\n  })), __jsx(\"div\", {\n    className: \"social-share-grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: \"social-share-grid-items\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 29\n    }\n  }, __jsx(FacebookShareButton, {\n    url: location,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 29\n    }\n  }, __jsx(FacebookIcon, {\n    size: \"40px\",\n    round: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 31\n    }\n  })), __jsx(LinkedinShareButton, {\n    url: window.location.href,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 29\n    }\n  }, __jsx(LinkedinIcon, {\n    size: \"40px\",\n    round: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 31\n    }\n  })), __jsx(WhatsappShareButton, {\n    url: window.location.href,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }\n  }, __jsx(WhatsappIcon, {\n    size: \"40px\",\n    round: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 31\n    }\n  })), __jsx(TelegramShareButton, {\n    url: window.location.href,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }, __jsx(TelegramIcon, {\n    size: \"40px\",\n    round: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 31\n    }\n  })), __jsx(TwitterShareButton, {\n    url: window.location.href,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 29\n    }\n  }, __jsx(TwitterIcon, {\n    size: \"40px\",\n    round: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 31\n    }\n  })))))), __jsx(\"div\", {\n    className: \"single-comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \" container single-comments-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"single-comments-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"single-comments-inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }, \"Comments\"), commentObj, __jsx(\"div\", {\n    id: \"showcomments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }))), __jsx(\"div\", {\n    className: \"post-comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, \"Join the conversation\"), __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    id: \"comment-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"comment-form-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, errMsg !== '' && __jsx(\"div\", {\n    className: \"alert alert-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 17\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 21\n    }\n  }, errMsg)), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 21\n    }\n  }, __jsx(\"textarea\", {\n    className: \"form-control\",\n    rows: \"3\",\n    id: \"comment\",\n    name: \"comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }, __jsx(\"button\", {\n    id: \"comment-button\",\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 25\n    }\n  }, \"Submit\")))), !user && __jsx(\"a\", {\n    href: \"\",\n    className: \"create-comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 21\n    }\n  }, \"Create an Account to join the conversation \")))), __jsx(\"div\", {\n    className: \"col-md-3 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"row sub-section-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"center sub-section-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 25\n    }\n  }, \"Latest News\"), __jsx(\"div\", {\n    className: \"col-md-12 mis-section-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 25\n    }\n  }, latestObj))), __jsx(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"row sub-section-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"center sub-section-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 25\n    }\n  }, \"Top News\"), __jsx(\"div\", {\n    className: \"col-md-12 mis-section-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 25\n    }\n  }, topNewsObj)))))));\n}","map":{"version":3,"sources":["c:/Users/hero/Documents/projects/Next/components/Single.js"],"names":["React","useState","useEffect","useCurrentComments","Link","useCurrentUser","EmailShareButton","FacebookShareButton","FacebookIcon","TwitterShareButton","TwitterIcon","WhatsappShareButton","WhatsappIcon","TelegramShareButton","TelegramIcon","LinkedinShareButton","LinkedinIcon","Single","props","user","posts","single","latestObj","topNewsObj","errMsg","setErrMsg","commentObj","setCommentObj","_id","comments","mutate","location","setLocation","console","log","CommentBlock","comment","Date","createdAt","toString","slice","stringToHtml","ele","document","createElement","innerHTML","content","CommentSection","Array","map","value","window","href","handleSubmit","e","preventDefault","body","currentTarget","post_id","fetch","method","headers","JSON","stringify","res","status","json","getElementById","text","display","caption","image_link","whiteSpace","__html","source"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAAQC,kBAAR,QAAiC,cAAjC;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,cAAT,QAA+B,cAA/B;AACA,SAAQC,gBAAR,EACQC,mBADR,EAEQC,YAFR,EAGQC,kBAHR,EAIQC,WAJR,EAKQC,mBALR,EAMQC,YANR,EAOQC,mBAPR,EAQQC,YARR,EASQC,mBATR,EAUQC,YAVR,QAU2B,aAV3B;AAYA,eAAe,SAASC,MAAT,CAAgBC,KAAhB,EAAsB;AAAA;;AAAA,wBACtBb,cAAc,EADQ;AAAA;AAAA,MAC9Bc,IAD8B;;AAAA,qBAEGD,KAAK,CAACE,KAFT;AAAA,MAE9BC,MAF8B,gBAE9BA,MAF8B;AAAA,MAEtBC,SAFsB,gBAEtBA,SAFsB;AAAA,MAEXC,UAFW,gBAEXA,UAFW;;AAAA,kBAGTtB,QAAQ,CAAC,EAAD,CAHC;AAAA,MAG9BuB,MAH8B;AAAA,MAGtBC,SAHsB;;AAAA,mBAIDxB,QAAQ,CAAC,EAAD,CAJP;AAAA,MAI9ByB,UAJ8B;AAAA,MAIlBC,aAJkB;;AAAA,4BAKNxB,kBAAkB,yBAAkBkB,MAAM,CAACO,GAAzB,EALZ;AAAA;AAAA,MAK9BC,QAL8B;AAAA,MAKlBC,MALkB,2BAKlBA,MALkB;;AAAA,mBAMN7B,QAAQ,CAAC,EAAD,CANF;AAAA,MAM9B8B,QAN8B;AAAA,MAMpBC,WANoB;;AAOrCC,EAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;;AACA,MAAMI,YAAY,GAAG,SAAfA,YAAe,CAACjB,KAAD;AAAA,WAErB;AAAK,MAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG;AAAK,MAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK;AAAG,MAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADL,CADH,EAII;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAMA,KAAK,CAACkB,OAAN,CAAcA,OAApB,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAO,IAAIC,IAAJ,CAASnB,KAAK,CAACkB,OAAN,CAAcE,SAAvB,EAAkCC,QAAlC,GAA6CC,KAA7C,CAAmD,CAAnD,EAAqD,EAArD,CAAP,CAFJ,CAJJ,CAFqB;AAAA,GAArB;;AAaA,MAAMC,YAAY,GAAG,SAAfA,YAAe,GAAI;AACvB,QAAMC,GAAG,GAAIC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAb;AACAF,IAAAA,GAAG,CAACG,SAAJ,GAAgBxB,MAAM,CAACyB,OAAvB;AACA,WAAOJ,GAAP;AACD,GAJD;;AAMA,MAAMK,cAAc,GAAG,SAAjBA,cAAiB,GAAI;AAEvB,QAAGlB,QAAQ,YAAYmB,KAAvB,EAA6B;AAC1B,aAAOnB,QAAQ,CAACoB,GAAT,CAAa,UAAAC,KAAK;AAAA,eAAG,MAAC,YAAD;AAAc,UAAA,GAAG,EAAEA,KAAK,CAACtB,GAAzB;AAA8B,UAAA,OAAO,EAAEsB,KAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAH;AAAA,OAAlB,CAAP;AACF;;AACD,WAAO,EAAP;AACH,GAND;;AAOAT,EAAAA,YAAY;AACZvC,EAAAA,SAAS,CAAC,YAAM;AACZ8B,IAAAA,WAAW,CAACmB,MAAM,CAACpB,QAAP,CAAgBqB,IAAjB,CAAX;AACJzB,IAAAA,aAAa,CAACoB,cAAc,EAAf,CAAb;AACC,GAHQ,EAGN,CAAClB,QAAD,CAHM,CAAT;;AAIA,WAAewB,YAAf,CAA4BC,CAA5B;AAAA;;AAAA;AAAA;AAAA;AAAA;AACIA,YAAAA,CAAC,CAACC,cAAF;AACMC,YAAAA,IAFV,GAEiB;AACXpB,cAAAA,OAAO,EAAEkB,CAAC,CAACG,aAAF,CAAgBrB,OAAhB,CAAwBc,KADtB;AAEXQ,cAAAA,OAAO,EAAErC,MAAM,CAACO;AAFL,aAFjB;AAMIK,YAAAA,OAAO,CAACC,GAAR,CAAYoB,CAAC,CAACG,aAAF,CAAgBrB,OAAhB,CAAwBc,KAApC;AANJ;AAAA,6CAOsBS,KAAK,CAAC,eAAD,EAAkB;AACvCC,cAAAA,MAAM,EAAE,MAD+B;AAEvCC,cAAAA,OAAO,EAAE;AAAE,gCAAgB;AAAlB,eAF8B;AAGvCL,cAAAA,IAAI,EAAEM,IAAI,CAACC,SAAL,CAAeP,IAAf;AAHiC,aAAlB,CAP3B;;AAAA;AAOUQ,YAAAA,GAPV;;AAAA,kBAaOA,GAAG,CAACC,MAAJ,KAAe,GAbtB;AAAA;AAAA;AAAA;;AAAA;AAAA,6CAckCD,GAAG,CAACE,IAAJ,EAdlC;;AAAA;AAccxC,YAAAA,WAdd;AAeQI,YAAAA,MAAM,CAACJ,WAAD,CAAN;AAEAiB,YAAAA,QAAQ,CAACwB,cAAT,CAAwB,SAAxB,EAAmCjB,KAAnC,GAA2C,EAA3C;AAjBR;AAAA;;AAAA;AAAA,0BAmBSzB,SAnBT;AAAA;AAAA,6CAmByBuC,GAAG,CAACI,IAAJ,EAnBzB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAsBA,SACA;AAAS,IAAA,EAAE,EAAC,cAAZ;AAA2B,IAAA,KAAK,EAAE;AAACC,MAAAA,OAAO,EAAC;AAAT,KAAlC;AAAqD,IAAA,SAAS,EAAC,4CAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACQ;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACR;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACY;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKhD,MAAM,CAACiD,OADZ,CADJ,EAII;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK,IAAIjC,IAAJ,CAAShB,MAAM,CAACiB,SAAhB,EAA2BC,QAA3B,GAAsCC,KAAtC,CAA4C,CAA5C,EAA8C,EAA9C,CADL,CAJJ,EAQI;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,GAAG,EAAEnB,MAAM,CAACkD,UAAjB;AAA6B,IAAA,SAAS,EAAC,0BAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CARJ,EAYA;AAAK,IAAA,KAAK,EAAE;AAACC,MAAAA,UAAU,EAAC;AAAZ,KAAZ;AAAqC,IAAA,SAAS,EAAC,gBAA/C;AACA,IAAA,uBAAuB,EAAG;AAACC,MAAAA,MAAM,EAAEpD,MAAM,CAACyB;AAAhB,KAD1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGCzB,MAAM,CAACqD,MAAP,KAAkB,IAAlB,IACD;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,EACmB;AAAG,IAAA,IAAI,EAAC,uBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAiCrD,MAAM,CAACqD,MAAxC,CADnB,CAJA,EAUhB;AAAK,IAAA,SAAS,EAAC,wCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACoB;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6B;AAAK,IAAA,GAAG,EAAC,4BAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA7B,CADpB,EAEwB;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,MAAC,mBAAD;AAAqB,IAAA,GAAG,EAAE3C,QAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,MAAE,YAAF;AAAe,IAAA,IAAI,EAAC,MAApB;AAA2B,IAAA,KAAK,EAAC,MAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADA,EAKA,MAAC,mBAAD;AAAqB,IAAA,GAAG,EAAEoB,MAAM,CAACpB,QAAP,CAAgBqB,IAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,MAAE,YAAF;AAAe,IAAA,IAAI,EAAC,MAApB;AAA2B,IAAA,KAAK,EAAC,MAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CALA,EASA,MAAC,mBAAD;AAAqB,IAAA,GAAG,EAAED,MAAM,CAACpB,QAAP,CAAgBqB,IAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,MAAC,YAAD;AAAc,IAAA,IAAI,EAAC,MAAnB;AAA0B,IAAA,KAAK,EAAC,MAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CATA,EAaA,MAAC,mBAAD;AAAqB,IAAA,GAAG,EAAED,MAAM,CAACpB,QAAP,CAAgBqB,IAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,MAAC,YAAD;AAAc,IAAA,IAAI,EAAC,MAAnB;AAA0B,IAAA,KAAK,EAAC,MAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAbA,EAiBA,MAAC,kBAAD;AAAoB,IAAA,GAAG,EAAED,MAAM,CAACpB,QAAP,CAAgBqB,IAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,MAAC,WAAD;AAAa,IAAA,IAAI,EAAC,MAAlB;AAAyB,IAAA,KAAK,EAAC,MAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAjBA,CADJ,CAFxB,CAVgB,CAZA,EAqDR;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACQ;AAAK,IAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,EAGS1B,UAHT,EAII;AAAK,IAAA,EAAE,EAAC,cAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CADJ,CADR,EAWQ;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAXR,EAcQ;AAAM,IAAA,QAAQ,EAAE2B,YAAhB;AAA8B,IAAA,EAAE,EAAC,cAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEA;AAAK,IAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE7B,MAAM,KAAG,EAAT,IACF;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAASA,MAAT,CADJ,CAFA,EAOI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI;AAAU,IAAA,SAAS,EAAC,cAApB;AAAmC,IAAA,IAAI,EAAC,GAAxC;AAA4C,IAAA,EAAE,EAAC,SAA/C;AACA,IAAA,IAAI,EAAC,SADL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAPJ,EAaI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAQ,IAAA,EAAE,EAAC,gBAAX;AAA4B,IAAA,IAAI,EAAC,QAAjC;AAA0C,IAAA,SAAS,EAAC,iBAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,CAbJ,CAFA,CAdR,EAkCS,CAACL,IAAD,IACG;AAAG,IAAA,IAAI,EAAC,EAAR;AAAW,IAAA,SAAS,EAAC,iBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDAnCZ,CArDQ,CADZ,CADQ,EA+FR;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEY;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,EAII;AAAK,IAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKG,SADL,CAJJ,CADJ,CAFZ,EAaY;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,EAII;AAAK,IAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKC,UADL,CAJJ,CADJ,CAbZ,CA/FQ,CADJ,CADR,CADA;AA8HC","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport {useCurrentComments} from '../lib/hooks'\nimport Link from 'next/link'\nimport { useCurrentUser } from '../lib/hooks';\nimport {EmailShareButton, \n        FacebookShareButton,\n        FacebookIcon, \n        TwitterShareButton, \n        TwitterIcon,\n        WhatsappShareButton,\n        WhatsappIcon,\n        TelegramShareButton,\n        TelegramIcon,\n        LinkedinShareButton,\n        LinkedinIcon} from 'react-share'\n\nexport default function Single(props){\nconst [user] = useCurrentUser()\nconst {single, latestObj, topNewsObj} = props.posts\nconst [errMsg, setErrMsg] = useState('')\nconst [commentObj, setCommentObj] = useState([])\nconst [comments, { mutate }] = useCurrentComments(`/api/comments/${single._id}`)\nconst [location, setLocation]= useState({});\nconsole.log(location)\nconst CommentBlock = (props)=>(\n \n<div className=\"card showcomments-main bg-light-grey\">  \n   <div className=\"comment-img-container\">\n        <i className=\"fas fa-user\"></i>\n    </div>\n    <div className=\"comments-item\">\n        <div>{props.comment.comment}</div>\n        <div >{new Date(props.comment.createdAt).toString().slice(0,16)}</div>\n    </div>\n</div>\n)\n\nconst stringToHtml = ()=>{\n  const ele =  document.createElement('div')\n  ele.innerHTML = single.content;\n  return ele;\n}\n\nconst CommentSection = ()=>{\n  \n    if(comments instanceof Array){\n       return comments.map(value =><CommentBlock key={value._id} comment={value}/> )\n    }\n    return []\n}\nstringToHtml()\nuseEffect(() => {\n    setLocation(window.location.href)\nsetCommentObj(CommentSection())\n}, [comments])\nasync function handleSubmit(e){\n    e.preventDefault();\n    const body = {\n      comment: e.currentTarget.comment.value,\n      post_id: single._id\n    };\n    console.log(e.currentTarget.comment.value)\n    const res = await fetch('/api/comments', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(body),\n    });\n\n    if(res.status === 201){\n        const commentObj = (await res.json())\n        mutate(commentObj);\n       \n        document.getElementById('comment').value = ''\n    }\n    else{setErrMsg(await res.text())}\n}\n\nreturn(\n<section id=\"main-content\" style={{display:'block'}} className=\"animate-bottom section-top-space nav-clear\">\n        <div className=\"container-fluid\">\n            <div className=\"row\">\n    <div className=\"col-md-9 \">\n                <div className=\"single-container\">\n                    <div className=\"center single-caption\">\n                        {single.caption}\n                    </div>\n                    <div className=\"center single-date\">\n                        {new Date(single.createdAt).toString().slice(0,16)}\n                    </div>\n                    \n                    <div className=\"port-img\">\n                        <img src={single.image_link} className=\"img-fluid singlepost-img\" />\n                    </div>\n                \n                <div style={{whiteSpace:'pre-line'}} className=\"single-content\" \n                dangerouslySetInnerHTML= {{__html: single.content}}>\n                 \n                {single.source !== null &&\n                <div className=\"mt-2 mb-3\">\n                    <b>Source: </b><a href=\"{single.source_link}}\">{single.source}</a>\n                </div>\n                }\n\n\n<div className=\"container margin-gap position-relative\">\n                    <div className=\"sharing-img\"><img src=\"/images/sharing_caring.png\"/></div>\n                        <div className=\"social-share-grid\">\n                            <div className=\"social-share-grid-items\">\n                            <FacebookShareButton url={location}>\n                               {/*<button className=\"btn btn-success main-color\">f</button>*/}\n                              < FacebookIcon size=\"40px\" round=\"true\"/>\n                            </FacebookShareButton>\n                            <LinkedinShareButton url={window.location.href}>\n                               {/*<button className=\"btn btn-success main-color\">f</button>*/}\n                              < LinkedinIcon size=\"40px\" round=\"true\"/>\n                            </LinkedinShareButton>\n                            <WhatsappShareButton url={window.location.href}>\n                               {/*<button className=\"btn btn-success main-color\">f</button>*/}\n                              <WhatsappIcon size=\"40px\" round=\"true\"/>\n                            </WhatsappShareButton>\n                            <TelegramShareButton url={window.location.href}>\n                               {/*<button className=\"btn btn-success main-color\">f</button>*/}\n                              <TelegramIcon size=\"40px\" round=\"true\"/>\n                            </TelegramShareButton>\n                            <TwitterShareButton url={window.location.href}>\n                               {/*<button className=\"btn btn-success main-color\">f</button>*/}\n                              <TwitterIcon size=\"40px\" round=\"true\"/>\n                            </TwitterShareButton>\n                            </div>   \n                        </div>\n                </div>\n                </div>\n\n                \n\n        <div className=\"single-comments\" >\n                <div className=\" container single-comments-container\" >\n                    <div className=\"single-comments-col\">\n                        <div className=\"single-comments-inner\">Comments</div>\n                        {/*loop comments*/} \n                            {commentObj}\n                        <div id=\"showcomments\"></div>\n                    </div>\n                </div>\n\n                {/*if user exist*/}\n                <div className=\"post-comment\" >\n                Join the conversation                     \n                </div>\n                <form onSubmit={handleSubmit} id=\"comment-form\" >\n                                           \n                <div className=\"comment-form-container\">\n                { errMsg!==''&&              \n                <div className=\"alert alert-danger\">\n                    <strong>{errMsg}</strong>\n                </div>\n                }\n                    \n                    <div className=\"form-group\">\n                        {/*\"input type=hidden name=post_id value=*/}\n                        <textarea className=\"form-control\" rows=\"3\" id=\"comment\" \n                        name=\"comment\"></textarea>\n                    </div>\n                    \n                    <div className=\"form-group\">\n                        <button id=\"comment-button\" type=\"submit\" className=\"btn btn-primary\">Submit</button>\n                    </div>\n                </div>   \n            </form>\n                {!user &&\n                    <a href=\"\" className=\"create-comments\">Create an Account to join the conversation </a>\n                }\n            </div>\n        </div>\n    </div>\n    <div className=\"col-md-3 \">\n\n                <div className=\"container\">\n                    <div className=\"row sub-section-row\">\n                        <div className=\"center sub-section-title\">\n                            Latest News\n                        </div>\n                        <div className=\"col-md-12 mis-section-col\">\n                            {latestObj}\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"container\">\n                    <div className=\"row sub-section-row\">\n                        <div className=\"center sub-section-title\">\n                          Top News\n                        </div>\n                        <div className=\"col-md-12 mis-section-col\">\n                            {topNewsObj}\n                        </div>\n                    </div>\n                </div>              \n            </div>\n        </div>\n    </div>\n</section>\n)\n}\n"]},"metadata":{},"sourceType":"module"}