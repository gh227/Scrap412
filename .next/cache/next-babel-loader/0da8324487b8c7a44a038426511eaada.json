{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hero\\\\Documents\\\\projects\\\\Next\\\\pages\\\\news\\\\[cat]\\\\index.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Head from '../../../components/Head';\nimport Nav from '../../../components/Nav';\nimport Link from 'next/link';\nimport { categoryReturn, filterCat, spliter } from '../../../lib/posts';\nimport { getPosts } from '../../../lib/db';\nimport middleware from '../../../middlewares/middleware';\nimport CatComponent from '../../../components/Cat';\nimport Loader from '../../../components/Loader';\nimport Footer from '../../../components/Footer';\n\nconst Post = props => {\n  const {\n    post\n  } = props;\n  return __jsx(\"div\", {\n    className: \"col-lg-4 col-md-6 col-sm-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"news-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 11\n    }\n  }, post.image_link !== null ? __jsx(\"a\", {\n    className: \"news-items\",\n    href: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 15\n    }\n  }, __jsx(\"img\", {\n    src: post.image_link,\n    className: \"img-fluid sub-inner-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 15\n    }\n  })) : __jsx(\"a\", {\n    className: \"news-items\",\n    href: `/news/`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 15\n    }\n  }, __jsx(\"img\", {\n    src: post.image_link,\n    className: \"img-fluid sub-inner-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 15\n    }\n  })), __jsx(Link, {\n    href: \"/news/[cat]/[title]\",\n    as: `/news/${post.category}/${post.caption}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    className: \"news-items\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 17\n    }\n  }, post.caption))));\n};\n\nconst Abstract = props => {\n  const {\n    post\n  } = props;\n  return __jsx(\"div\", {\n    className: \"col-md-12 col-sm-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"news-container news-tablet-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 15\n    }\n  }, post.image_link !== null ? __jsx(\"a\", {\n    className: \"news-items\",\n    href: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 19\n    }\n  }, __jsx(\"img\", {\n    src: post.image_link,\n    className: \"img-fluid sub-inner-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 19\n    }\n  })) : __jsx(\"a\", {\n    className: \"news-items\",\n    href: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 19\n    }\n  }, __jsx(\"img\", {\n    src: post.image_link,\n    className: \"img-fluid sub-inner-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 19\n    }\n  })), __jsx(\"a\", {\n    className: \"news-items\",\n    href: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, post.caption)));\n};\n\nexport async function getServerSideProps(context) {\n  await middleware.apply(context.req, context.res);\n  const posts = await getPosts(context.req, context.params.cat);\n  if (!posts) context.res.statusCode = 404;\n  const {\n    posts: data\n  } = posts;\n  const intro = categoryReturn(data, context.params.cat, 1, 'headings')[0];\n  const currentCat = filterCat(data, {\n    category: context.params.cat,\n    headings: 'not',\n    abstract_cat: ''\n  });\n  return {\n    props: {\n      data,\n      currentCat,\n      intro\n    }\n  };\n}\n\nfunction Cat(props) {\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  useEffect(() => {\n    if (props) {\n      setTimeout(() => {\n        setLoading(false);\n      }, 3000);\n    }\n  }, []);\n  const cat = props.currentCat.map(post => __jsx(Post, {\n    key: post._id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 42\n    }\n  }));\n  const latest_news = categoryReturn(props.data, 'latest_news', 5, 'abstract_cat').map(post => __jsx(Abstract, {\n    key: post._id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 95\n    }\n  }));\n  const top_news = categoryReturn(props.data, 'top_stories', 5, 'abstract_cat').map(post => __jsx(Abstract, {\n    key: post._id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 92\n    }\n  }));\n  const catArray = spliter(cat, 12);\n  return __jsx(\"div\", {\n    id: \"app-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 1\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 1\n    }\n  }), loading ? __jsx(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }) : __jsx(\"div\", {\n    id: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 3\n    }\n  }, __jsx(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }), __jsx(CatComponent, {\n    intro: props.intro,\n    posts: {\n      cat: catArray,\n      latest_news,\n      top_news\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }), __jsx(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  })));\n}\n\nexport default Cat;","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/pages/news/[cat]/index.js"],"names":["React","useState","useEffect","Head","Nav","Link","categoryReturn","filterCat","spliter","getPosts","middleware","CatComponent","Loader","Footer","Post","props","post","image_link","category","caption","Abstract","getServerSideProps","context","apply","req","res","posts","params","cat","statusCode","data","intro","currentCat","headings","abstract_cat","Cat","loading","setLoading","setTimeout","map","_id","latest_news","top_news","catArray"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport Head from '../../../components/Head'\r\nimport Nav from '../../../components/Nav'\r\nimport Link from 'next/link'\r\nimport {categoryReturn, filterCat,spliter} from '../../../lib/posts'\r\nimport { getPosts } from '../../../lib/db';\r\nimport middleware from '../../../middlewares/middleware';\r\nimport CatComponent from '../../../components/Cat'\r\nimport Loader from '../../../components/Loader'\r\nimport Footer from '../../../components/Footer'\r\n\r\nconst Post =(props)=>{\r\n  const {post} = props;\r\n  \r\n  return(                  \r\n      <div className=\"col-lg-4 col-md-6 col-sm-6\">\r\n          <div className=\"news-container\">\r\n              {\r\n              post.image_link !== null ?\r\n              <a className=\"news-items\" href=''>\r\n              <img src={post.image_link} className=\"img-fluid sub-inner-img\" />\r\n              </a>\r\n              :\r\n              <a className=\"news-items\" href={`/news/`}>\r\n              <img src={post.image_link}  className=\"img-fluid sub-inner-img\"/>\r\n              </a>\r\n              }\r\n            <Link href=\"/news/[cat]/[title]\" as={`/news/${post.category}/${post.caption}`}>\r\n                <a className=\"news-items\" >\r\n                  {post.caption}\r\n                </a> \r\n            </Link>\r\n              \r\n          </div>\r\n      </div>\r\n      )\r\n  }\r\n\r\n  const Abstract =(props)=>{\r\n      const {post} = props;\r\n      return(                  \r\n          <div className=\"col-md-12 col-sm-12\">\r\n              <div className=\"news-container news-tablet-container\">\r\n                  {\r\n                  post.image_link !== null ?\r\n                  <a className=\"news-items\" href=''>\r\n                  <img src={post.image_link} className=\"img-fluid sub-inner-img\" />\r\n                  </a>\r\n                  :\r\n                  <a className=\"news-items\" href=''>\r\n                  <img src={post.image_link}  className=\"img-fluid sub-inner-img\"/>\r\n                  </a>\r\n                  }\r\n                <a className=\"news-items\" href=\"\">{post.caption}\r\n                </a>   \r\n              </div>\r\n          </div>\r\n    )\r\n  }\r\n\r\nexport async function getServerSideProps(context) {\r\n  await middleware.apply(context.req, context.res);\r\n const posts = await getPosts(context.req, context.params.cat);\r\n  if (!posts) context.res.statusCode = 404;\r\n  const {posts:data} = posts\r\n  const intro = categoryReturn(data, context.params.cat, 1, 'headings')[0];\r\n  const currentCat = filterCat(data, {category:context.params.cat, headings:'not', abstract_cat:''})\r\n  return {props:{data, currentCat, intro,}}\r\n}\r\n\r\nfunction Cat(props){\r\n  const [loading, setLoading] = useState(true)\r\n  useEffect(() => {\r\n    if(props) {\r\n      setTimeout(()=>{setLoading(false)}, 3000)\r\n    }\r\n  }, [])\r\nconst cat = props.currentCat.map((post)=><Post key={post._id} post={post}/>)\r\nconst latest_news =  categoryReturn(props.data, 'latest_news', 5, 'abstract_cat').map((post)=><Abstract key={post._id} post={post}/>)\r\nconst top_news =  categoryReturn(props.data, 'top_stories', 5, 'abstract_cat').map((post)=><Abstract key={post._id} post={post}/>)\r\nconst catArray = spliter(cat, 12)\r\n  return(\r\n<div  id=\"app-container\">\r\n<Head/>\r\n{\r\n  loading?<Loader/>\r\n  :\r\n  <div id=\"content\" >\r\n   \r\n    <Nav/>\r\n    <CatComponent intro={props.intro} posts={{cat:catArray, latest_news, top_news}}/>\r\n    <Footer/>\r\n  </div>\r\n}\r\n      \r\n  \r\n  \r\n</div>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default Cat"]},"metadata":{},"sourceType":"module"}