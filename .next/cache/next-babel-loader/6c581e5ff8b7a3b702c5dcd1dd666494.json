{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\hero\\\\Documents\\\\projects\\\\Next\\\\pages\\\\login.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { useCurrentUser } from '../lib/hooks';\nimport Head from '../components/Head';\nimport { loading } from '../lib/misfunctions';\nimport Loader from '../components/Loader';\n\nfunction Login() {\n  var router = useRouter();\n\n  var _useState = useState(''),\n      errorMsg = _useState[0],\n      setErrorMsg = _useState[1];\n\n  var _useCurrentUser = useCurrentUser(),\n      _useCurrentUser2 = _slicedToArray(_useCurrentUser, 2),\n      user = _useCurrentUser2[0],\n      mutate = _useCurrentUser2[1].mutate;\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  useEffect(function () {\n    if (user) {\n      router.push('/');\n    } else {\n      setLoading(false);\n    }\n  }, [user]);\n\n  var _useState3 = useState({\n    email: '',\n    password: ''\n  }),\n      inputValue = _useState3[0],\n      setInputValue = _useState3[1];\n\n  var handleInput = function handleInput(e) {\n    setInputValue(_objectSpread({}, inputValue, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    var body, res, userObj;\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n            body = {\n              email: e.currentTarget.email.value,\n              password: e.currentTarget.password.value\n            };\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(fetch('/api/auth', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(body)\n            }));\n\n          case 4:\n            res = _context.sent;\n\n            if (!(res.status === 200)) {\n              _context.next = 12;\n              break;\n            }\n\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 8:\n            userObj = _context.sent;\n            mutate(userObj);\n            _context.next = 13;\n            break;\n\n          case 12:\n            setErrorMsg('Incorrect username or password. Try again!');\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return __jsx(\"div\", {\n    id: \"app-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, loading ? __jsx(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }) : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 8\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, \"not loading\")), \"}\");\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/hero/Documents/projects/Next/pages/login.js"],"names":["React","useState","useEffect","Link","useRouter","useCurrentUser","Head","loading","Loader","Login","router","errorMsg","setErrorMsg","user","mutate","setLoading","push","email","password","inputValue","setInputValue","handleInput","e","target","name","value","handleSubmit","preventDefault","body","currentTarget","fetch","method","headers","JSON","stringify","res","status","json","userObj"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,cAAT,QAA+B,cAA/B;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,SAAQC,OAAR,QAAsB,qBAAtB;AACA,OAAOC,MAAP,MAAoB,sBAApB;;AAEA,SAASC,KAAT,GAAgB;AACZ,MAAMC,MAAM,GAAGN,SAAS,EAAxB;;AADY,kBAEoBH,QAAQ,CAAC,EAAD,CAF5B;AAAA,MAELU,QAFK;AAAA,MAEKC,WAFL;;AAAA,wBAGeP,cAAc,EAH7B;AAAA;AAAA,MAGLQ,IAHK;AAAA,MAGGC,MAHH,uBAGGA,MAHH;;AAAA,mBAIkBb,QAAQ,CAAC,IAAD,CAJ1B;AAAA,MAILM,OAJK;AAAA,MAIIQ,UAJJ;;AAKZb,EAAAA,SAAS,CAAC,YAAM;AACd,QAAGW,IAAH,EAAS;AACTH,MAAAA,MAAM,CAACM,IAAP,CAAY,GAAZ;AACD,KAFC,MAEG;AACHD,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AAEA,GAPQ,EAON,CAACF,IAAD,CAPM,CAAT;;AALY,mBAawBZ,QAAQ,CAAC;AAACgB,IAAAA,KAAK,EAAC,EAAP;AAAWC,IAAAA,QAAQ,EAAC;AAApB,GAAD,CAbhC;AAAA,MAaLC,UAbK;AAAA,MAaOC,aAbP;;AAcZ,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,CAAD,EAAK;AACrBF,IAAAA,aAAa,mBAAKD,UAAL,sBAAkBG,CAAC,CAACC,MAAF,CAASC,IAA3B,EAAiCF,CAAC,CAACC,MAAF,CAASE,KAA1C,GAAb;AACH,GAFD;;AAIA,MAAMC,YAAY,GAAI,SAAhBA,YAAgB,CAAOJ,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACpBA,YAAAA,CAAC,CAACK,cAAF;AACMC,YAAAA,IAFc,GAEP;AACXX,cAAAA,KAAK,EAAEK,CAAC,CAACO,aAAF,CAAgBZ,KAAhB,CAAsBQ,KADlB;AAEXP,cAAAA,QAAQ,EAAEI,CAAC,CAACO,aAAF,CAAgBX,QAAhB,CAAyBO;AAFxB,aAFO;AAAA;AAAA,6CAMFK,KAAK,CAAC,WAAD,EAAc;AACnCC,cAAAA,MAAM,EAAE,MAD2B;AAEnCC,cAAAA,OAAO,EAAE;AAAE,gCAAgB;AAAlB,eAF0B;AAGnCJ,cAAAA,IAAI,EAAEK,IAAI,CAACC,SAAL,CAAeN,IAAf;AAH6B,aAAd,CANH;;AAAA;AAMdO,YAAAA,GANc;;AAAA,kBAWhBA,GAAG,CAACC,MAAJ,KAAe,GAXC;AAAA;AAAA;AAAA;;AAAA;AAAA,6CAYID,GAAG,CAACE,IAAJ,EAZJ;;AAAA;AAYZC,YAAAA,OAZY;AAalBxB,YAAAA,MAAM,CAACwB,OAAD,CAAN;AAbkB;AAAA;;AAAA;AAelB1B,YAAAA,WAAW,CAAC,4CAAD,CAAX;;AAfkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAtB;;AAmBA,SACE;AAAK,IAAA,EAAE,EAAC,eAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAECL,OAAO,GACR,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADQ,GAEP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAL,CAJD,MADF;AAWH;;AAED,eAAeE,KAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/router';\r\nimport { useCurrentUser } from '../lib/hooks';\r\nimport Head from '../components/Head'\r\nimport {loading} from '../lib/misfunctions'\r\nimport Loader  from '../components/Loader'\r\n\r\nfunction Login(){\r\n    const router = useRouter();\r\n    const [errorMsg, setErrorMsg] = useState('');\r\n    const [user, { mutate }] = useCurrentUser();\r\n    const [loading, setLoading] = useState(true);\r\n    useEffect(() => {\r\n      if(user) {\r\n      router.push('/');\r\n    }else{\r\n      setLoading(false);\r\n    }\r\n\r\n    }, [user]);\r\n    const [inputValue, setInputValue] = useState({email:'', password:''})\r\n    const handleInput = (e)=>{\r\n        setInputValue({...inputValue, [e.target.name]:e.target.value})\r\n    }\r\n\r\n    const handleSubmit =  async (e)=>{\r\n      e.preventDefault();\r\n      const body = {\r\n        email: e.currentTarget.email.value,\r\n        password: e.currentTarget.password.value,\r\n      };\r\n      const res = await fetch('/api/auth', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(body),\r\n      });\r\n      if (res.status === 200) {\r\n        const userObj = await res.json();\r\n        mutate(userObj);\r\n      } else {\r\n        setErrorMsg('Incorrect username or password. Try again!');\r\n      }\r\n    }\r\n\r\n    return(\r\n      <div id=\"app-container\">\r\n       \r\n      {loading?\r\n      <Loader/>\r\n      :<div><h1>not loading</h1></div>}\r\n       \r\n      }\r\n      \r\n      </div>       \r\n        )\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}